/**
 * ColumboReporter Web SDK
 *
 * @description A Javascript event tracker for web platform
 * @version     2.1.0 - Thu, 05 Oct 2023 19:36:21 GMT
 * @copyright   Apple, Inc 2023
 * @license     Apple Internal Use Only
 * @see https://columbo.apple.com
 */

!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(e){return e&&e.Math==Math&&e},n=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")(),r={},o={get exports(){return r},set exports(e){r=e}},i=n,a=Object.defineProperty,c=function(e,t){try{a(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t},s=c,u="__core-js_shared__",f=n[u]||s(u,{}),l=f;(o.exports=function(e,t){return l[e]||(l[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.1",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"});var h,d,p=function(e){try{return!!e()}catch(e){return!0}},v=!p((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),g=v,m=Function.prototype,y=m.call,b=g&&m.bind.bind(y,y),w=g?b:function(e){return function(){return y.apply(e,arguments)}},k=function(e){return null==e},E=k,S=TypeError,T=function(e){if(E(e))throw S("Can't call method on "+e);return e},x=T,O=Object,I=function(e){return O(x(e))},C=I,j=w({}.hasOwnProperty),P=Object.hasOwn||function(e,t){return j(C(e),t)},R=w,A=0,N=Math.random(),L=R(1..toString),M=function(e){return"Symbol("+(void 0===e?"":e)+")_"+L(++A+N,36)},D="undefined"!=typeof navigator&&String(navigator.userAgent)||"",_=n,F=D,q=_.process,V=_.Deno,B=q&&q.versions||V&&V.version,U=B&&B.v8;U&&(d=(h=U.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!d&&F&&(!(h=F.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=F.match(/Chrome\/(\d+)/))&&(d=+h[1]);var H=d,K=H,G=p,z=!!Object.getOwnPropertySymbols&&!G((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&K&&K<41})),W=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=r,J=P,X=M,Q=z,Y=W,Z=n.Symbol,ee=$("wks"),te=Y?Z.for||Z:Z&&Z.withoutSetter||X,ne=function(e){return J(ee,e)||(ee[e]=Q&&J(Z,e)?Z[e]:te("Symbol."+e)),ee[e]},re={};re[ne("toStringTag")]="z";var oe="[object z]"===String(re),ie="object"==typeof document&&document.all,ae={all:ie,IS_HTMLDDA:void 0===ie&&void 0!==ie},ce=ae.all,se=ae.IS_HTMLDDA?function(e){return"function"==typeof e||e===ce}:function(e){return"function"==typeof e},ue={},fe=!p((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),le=se,he=ae.all,de=ae.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:le(e)||e===he}:function(e){return"object"==typeof e?null!==e:le(e)},pe=de,ve=n.document,ge=pe(ve)&&pe(ve.createElement),me=function(e){return ge?ve.createElement(e):{}},ye=me,be=!fe&&!p((function(){return 7!=Object.defineProperty(ye("div"),"a",{get:function(){return 7}}).a})),we=fe&&p((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),ke=de,Ee=String,Se=TypeError,Te=function(e){if(ke(e))return e;throw Se(Ee(e)+" is not an object")},xe=v,Oe=Function.prototype.call,Ie=xe?Oe.bind(Oe):function(){return Oe.apply(Oe,arguments)},Ce=n,je=se,Pe=function(e,t){return arguments.length<2?(n=Ce[e],je(n)?n:void 0):Ce[e]&&Ce[e][t];var n},Re=w({}.isPrototypeOf),Ae=Pe,Ne=se,Le=Re,Me=Object,De=W?function(e){return"symbol"==typeof e}:function(e){var t=Ae("Symbol");return Ne(t)&&Le(t.prototype,Me(e))},_e=String,Fe=function(e){try{return _e(e)}catch(e){return"Object"}},qe=se,Ve=Fe,Be=TypeError,Ue=function(e){if(qe(e))return e;throw Be(Ve(e)+" is not a function")},He=Ue,Ke=k,Ge=function(e,t){var n=e[t];return Ke(n)?void 0:He(n)},ze=Ie,We=se,$e=de,Je=TypeError,Xe=Ie,Qe=de,Ye=De,Ze=Ge,et=function(e,t){var n,r;if("string"===t&&We(n=e.toString)&&!$e(r=ze(n,e)))return r;if(We(n=e.valueOf)&&!$e(r=ze(n,e)))return r;if("string"!==t&&We(n=e.toString)&&!$e(r=ze(n,e)))return r;throw Je("Can't convert object to primitive value")},tt=TypeError,nt=ne("toPrimitive"),rt=function(e,t){if(!Qe(e)||Ye(e))return e;var n,r=Ze(e,nt);if(r){if(void 0===t&&(t="default"),n=Xe(r,e,t),!Qe(n)||Ye(n))return n;throw tt("Can't convert object to primitive value")}return void 0===t&&(t="number"),et(e,t)},ot=rt,it=De,at=function(e){var t=ot(e,"string");return it(t)?t:t+""},ct=fe,st=be,ut=we,ft=Te,lt=at,ht=TypeError,dt=Object.defineProperty,pt=Object.getOwnPropertyDescriptor,vt="enumerable",gt="configurable",mt="writable";ue.f=ct?ut?function(e,t,n){if(ft(e),t=lt(t),ft(n),"function"==typeof e&&"prototype"===t&&"value"in n&&mt in n&&!n[mt]){var r=pt(e,t);r&&r[mt]&&(e[t]=n.value,n={configurable:gt in n?n[gt]:r[gt],enumerable:vt in n?n[vt]:r[vt],writable:!1})}return dt(e,t,n)}:dt:function(e,t,n){if(ft(e),t=lt(t),ft(n),st)try{return dt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw ht("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var yt={},bt={get exports(){return yt},set exports(e){yt=e}},wt=fe,kt=P,Et=Function.prototype,St=wt&&Object.getOwnPropertyDescriptor,Tt=kt(Et,"name"),xt={EXISTS:Tt,PROPER:Tt&&"something"===function(){}.name,CONFIGURABLE:Tt&&(!wt||wt&&St(Et,"name").configurable)},Ot=se,It=f,Ct=w(Function.toString);Ot(It.inspectSource)||(It.inspectSource=function(e){return Ct(e)});var jt,Pt,Rt,At=It.inspectSource,Nt=se,Lt=n.WeakMap,Mt=Nt(Lt)&&/native code/.test(String(Lt)),Dt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_t=ue,Ft=Dt,qt=fe?function(e,t,n){return _t.f(e,t,Ft(1,n))}:function(e,t,n){return e[t]=n,e},Vt=M,Bt=r("keys"),Ut=function(e){return Bt[e]||(Bt[e]=Vt(e))},Ht={},Kt=Mt,Gt=n,zt=de,Wt=qt,$t=P,Jt=f,Xt=Ut,Qt=Ht,Yt="Object already initialized",Zt=Gt.TypeError,en=Gt.WeakMap;if(Kt||Jt.state){var tn=Jt.state||(Jt.state=new en);tn.get=tn.get,tn.has=tn.has,tn.set=tn.set,jt=function(e,t){if(tn.has(e))throw Zt(Yt);return t.facade=e,tn.set(e,t),t},Pt=function(e){return tn.get(e)||{}},Rt=function(e){return tn.has(e)}}else{var nn=Xt("state");Qt[nn]=!0,jt=function(e,t){if($t(e,nn))throw Zt(Yt);return t.facade=e,Wt(e,nn,t),t},Pt=function(e){return $t(e,nn)?e[nn]:{}},Rt=function(e){return $t(e,nn)}}var rn={set:jt,get:Pt,has:Rt,enforce:function(e){return Rt(e)?Pt(e):jt(e,{})},getterFor:function(e){return function(t){var n;if(!zt(t)||(n=Pt(t)).type!==e)throw Zt("Incompatible receiver, "+e+" required");return n}}},on=w,an=p,cn=se,sn=P,un=fe,fn=xt.CONFIGURABLE,ln=At,hn=rn.enforce,dn=rn.get,pn=String,vn=Object.defineProperty,gn=on("".slice),mn=on("".replace),yn=on([].join),bn=un&&!an((function(){return 8!==vn((function(){}),"length",{value:8}).length})),wn=String(String).split("String"),kn=bt.exports=function(e,t,n){"Symbol("===gn(pn(t),0,7)&&(t="["+mn(pn(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!sn(e,"name")||fn&&e.name!==t)&&(un?vn(e,"name",{value:t,configurable:!0}):e.name=t),bn&&n&&sn(n,"arity")&&e.length!==n.arity&&vn(e,"length",{value:n.arity});try{n&&sn(n,"constructor")&&n.constructor?un&&vn(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=hn(e);return sn(r,"source")||(r.source=yn(wn,"string"==typeof t?t:"")),e};Function.prototype.toString=kn((function(){return cn(this)&&dn(this).source||ln(this)}),"toString");var En=se,Sn=ue,Tn=yt,xn=c,On=function(e,t,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:t;if(En(n)&&Tn(n,i,r),r.global)o?e[t]=n:xn(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:Sn.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},In=w,Cn=In({}.toString),jn=In("".slice),Pn=function(e){return jn(Cn(e),8,-1)},Rn=oe,An=se,Nn=Pn,Ln=ne("toStringTag"),Mn=Object,Dn="Arguments"==Nn(function(){return arguments}()),_n=Rn?Nn:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Mn(e),Ln))?n:Dn?Nn(t):"Object"==(r=Nn(t))&&An(t.callee)?"Arguments":r},Fn=_n,qn=oe?{}.toString:function(){return"[object "+Fn(this)+"]"};oe||On(Object.prototype,"toString",qn,{unsafe:!0});var Vn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Bn=me("span").classList,Un=Bn&&Bn.constructor&&Bn.constructor.prototype,Hn=Un===Object.prototype?void 0:Un,Kn=Pn,Gn=w,zn=function(e){if("Function"===Kn(e))return Gn(e)},Wn=Ue,$n=v,Jn=zn(zn.bind),Xn=function(e,t){return Wn(e),void 0===t?e:$n?Jn(e,t):function(){return e.apply(t,arguments)}},Qn=p,Yn=Pn,Zn=Object,er=w("".split),tr=Qn((function(){return!Zn("z").propertyIsEnumerable(0)}))?function(e){return"String"==Yn(e)?er(e,""):Zn(e)}:Zn,nr=Math.ceil,rr=Math.floor,or=Math.trunc||function(e){var t=+e;return(t>0?rr:nr)(t)},ir=function(e){var t=+e;return t!=t||0===t?0:or(t)},ar=ir,cr=Math.min,sr=function(e){return e>0?cr(ar(e),9007199254740991):0},ur=sr,fr=function(e){return ur(e.length)},lr=Pn,hr=Array.isArray||function(e){return"Array"==lr(e)},dr=w,pr=p,vr=se,gr=_n,mr=At,yr=function(){},br=[],wr=Pe("Reflect","construct"),kr=/^\s*(?:class|function)\b/,Er=dr(kr.exec),Sr=!kr.exec(yr),Tr=function(e){if(!vr(e))return!1;try{return wr(yr,br,e),!0}catch(e){return!1}},xr=function(e){if(!vr(e))return!1;switch(gr(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Sr||!!Er(kr,mr(e))}catch(e){return!0}};xr.sham=!0;var Or=!wr||pr((function(){var e;return Tr(Tr.call)||!Tr(Object)||!Tr((function(){e=!0}))||e}))?xr:Tr,Ir=hr,Cr=Or,jr=de,Pr=ne("species"),Rr=Array,Ar=function(e){var t;return Ir(e)&&(t=e.constructor,(Cr(t)&&(t===Rr||Ir(t.prototype))||jr(t)&&null===(t=t[Pr]))&&(t=void 0)),void 0===t?Rr:t},Nr=function(e,t){return new(Ar(e))(0===t?0:t)},Lr=Xn,Mr=tr,Dr=I,_r=fr,Fr=Nr,qr=w([].push),Vr=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,c=5==e||i;return function(s,u,f,l){for(var h,d,p=Dr(s),v=Mr(p),g=Lr(u,f),m=_r(v),y=0,b=l||Fr,w=t?b(s,m):n||a?b(s,0):void 0;m>y;y++)if((c||y in v)&&(d=g(h=v[y],y,p),e))if(t)w[y]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:qr(w,h)}else switch(e){case 4:return!1;case 7:qr(w,h)}return i?-1:r||o?o:w}},Br={forEach:Vr(0),map:Vr(1),filter:Vr(2),some:Vr(3),every:Vr(4),find:Vr(5),findIndex:Vr(6),filterReject:Vr(7)},Ur=p,Hr=function(e,t){var n=[][e];return!!n&&Ur((function(){n.call(null,t||function(){return 1},1)}))},Kr=Br.forEach,Gr=Hr("forEach")?[].forEach:function(e){return Kr(this,e,arguments.length>1?arguments[1]:void 0)},zr=n,Wr=Vn,$r=Hn,Jr=Gr,Xr=qt,Qr=function(e){if(e&&e.forEach!==Jr)try{Xr(e,"forEach",Jr)}catch(t){e.forEach=Jr}};for(var Yr in Wr)Wr[Yr]&&Qr(zr[Yr]&&zr[Yr].prototype);Qr($r);var Zr={},eo={},to={}.propertyIsEnumerable,no=Object.getOwnPropertyDescriptor,ro=no&&!to.call({1:2},1);eo.f=ro?function(e){var t=no(this,e);return!!t&&t.enumerable}:to;var oo=tr,io=T,ao=function(e){return oo(io(e))},co=fe,so=Ie,uo=eo,fo=Dt,lo=ao,ho=at,po=P,vo=be,go=Object.getOwnPropertyDescriptor;Zr.f=co?go:function(e,t){if(e=lo(e),t=ho(t),vo)try{return go(e,t)}catch(e){}if(po(e,t))return fo(!so(uo.f,e,t),e[t])};var mo={},yo=ir,bo=Math.max,wo=Math.min,ko=function(e,t){var n=yo(e);return n<0?bo(n+t,0):wo(n,t)},Eo=ao,So=ko,To=fr,xo=function(e){return function(t,n,r){var o,i=Eo(t),a=To(i),c=So(r,a);if(e&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},Oo={includes:xo(!0),indexOf:xo(!1)},Io=P,Co=ao,jo=Oo.indexOf,Po=Ht,Ro=w([].push),Ao=function(e,t){var n,r=Co(e),o=0,i=[];for(n in r)!Io(Po,n)&&Io(r,n)&&Ro(i,n);for(;t.length>o;)Io(r,n=t[o++])&&(~jo(i,n)||Ro(i,n));return i},No=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lo=Ao,Mo=No.concat("length","prototype");mo.f=Object.getOwnPropertyNames||function(e){return Lo(e,Mo)};var Do={};Do.f=Object.getOwnPropertySymbols;var _o=Pe,Fo=mo,qo=Do,Vo=Te,Bo=w([].concat),Uo=_o("Reflect","ownKeys")||function(e){var t=Fo.f(Vo(e)),n=qo.f;return n?Bo(t,n(e)):t},Ho=P,Ko=Uo,Go=Zr,zo=ue,Wo=function(e,t,n){for(var r=Ko(t),o=zo.f,i=Go.f,a=0;a<r.length;a++){var c=r[a];Ho(e,c)||n&&Ho(n,c)||o(e,c,i(t,c))}},$o=p,Jo=se,Xo=/#|\.prototype\./,Qo=function(e,t){var n=Zo[Yo(e)];return n==ti||n!=ei&&(Jo(t)?$o(t):!!t)},Yo=Qo.normalize=function(e){return String(e).replace(Xo,".").toLowerCase()},Zo=Qo.data={},ei=Qo.NATIVE="N",ti=Qo.POLYFILL="P",ni=Qo,ri=n,oi=Zr.f,ii=qt,ai=On,ci=c,si=Wo,ui=ni,fi=function(e,t){var n,r,o,i,a,c=e.target,s=e.global,u=e.stat;if(n=s?ri:u?ri[c]||ci(c,{}):(ri[c]||{}).prototype)for(r in t){if(i=t[r],o=e.dontCallGetSet?(a=oi(n,r))&&a.value:n[r],!ui(s?r:c+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;si(i,o)}(e.sham||o&&o.sham)&&ii(i,"sham",!0),ai(n,r,i,e)}},li=fe,hi=hr,di=TypeError,pi=Object.getOwnPropertyDescriptor,vi=li&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(hi(e)&&!pi(e,"length").writable)throw di("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},gi=TypeError,mi=function(e){if(e>9007199254740991)throw gi("Maximum allowed index exceeded");return e},yi=I,bi=fr,wi=vi,ki=mi;function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){Ci(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ti(e){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ti(e)}function xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Li(r.key),r)}}function Ii(e,t,n){return t&&Oi(e.prototype,t),n&&Oi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ci(e,t,n){return(t=Li(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ji(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Pi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||Ai(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e){return function(e){if(Array.isArray(e))return Ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ai(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(e,t){if(e){if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(e,t):void 0}}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Li(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}fi({target:"Array",proto:!0,arity:1,forced:p((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=yi(this),n=bi(t),r=arguments.length;ki(n+r);for(var o=0;o<r;o++)t[n]=arguments[o],n++;return wi(t,n),n}}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var Mi,Di,_i,Fi,qi="undefined"!=typeof process&&"process"==Pn(process),Vi=w,Bi=Ue,Ui=se,Hi=String,Ki=TypeError,Gi=function(e,t,n){try{return Vi(Bi(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},zi=Te,Wi=function(e){if("object"==typeof e||Ui(e))return e;throw Ki("Can't set "+Hi(e)+" as a prototype")},$i=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Gi(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return zi(n),Wi(r),t?e(n,r):n.__proto__=r,n}}():void 0),Ji=ue.f,Xi=P,Qi=ne("toStringTag"),Yi=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Xi(e,Qi)&&Ji(e,Qi,{configurable:!0,value:t})},Zi=yt,ea=ue,ta=function(e,t,n){return n.get&&Zi(n.get,t,{getter:!0}),n.set&&Zi(n.set,t,{setter:!0}),ea.f(e,t,n)},na=Pe,ra=ta,oa=fe,ia=ne("species"),aa=function(e){var t=na(e);oa&&t&&!t[ia]&&ra(t,ia,{configurable:!0,get:function(){return this}})},ca=Re,sa=TypeError,ua=function(e,t){if(ca(t,e))return e;throw sa("Incorrect invocation")},fa=Or,la=Fe,ha=TypeError,da=Te,pa=function(e){if(fa(e))return e;throw ha(la(e)+" is not a constructor")},va=k,ga=ne("species"),ma=function(e,t){var n,r=da(e).constructor;return void 0===r||va(n=da(r)[ga])?t:pa(n)},ya=v,ba=Function.prototype,wa=ba.apply,ka=ba.call,Ea="object"==typeof Reflect&&Reflect.apply||(ya?ka.bind(wa):function(){return ka.apply(wa,arguments)}),Sa=Pe("document","documentElement"),Ta=w([].slice),xa=TypeError,Oa=/(?:ipad|iphone|ipod).*applewebkit/i.test(D),Ia=n,Ca=Ea,ja=Xn,Pa=se,Ra=P,Aa=p,Na=Sa,La=Ta,Ma=me,Da=function(e,t){if(e<t)throw xa("Not enough arguments");return e},_a=Oa,Fa=qi,qa=Ia.setImmediate,Va=Ia.clearImmediate,Ba=Ia.process,Ua=Ia.Dispatch,Ha=Ia.Function,Ka=Ia.MessageChannel,Ga=Ia.String,za=0,Wa={},$a="onreadystatechange";Aa((function(){Mi=Ia.location}));var Ja=function(e){if(Ra(Wa,e)){var t=Wa[e];delete Wa[e],t()}},Xa=function(e){return function(){Ja(e)}},Qa=function(e){Ja(e.data)},Ya=function(e){Ia.postMessage(Ga(e),Mi.protocol+"//"+Mi.host)};qa&&Va||(qa=function(e){Da(arguments.length,1);var t=Pa(e)?e:Ha(e),n=La(arguments,1);return Wa[++za]=function(){Ca(t,void 0,n)},Di(za),za},Va=function(e){delete Wa[e]},Fa?Di=function(e){Ba.nextTick(Xa(e))}:Ua&&Ua.now?Di=function(e){Ua.now(Xa(e))}:Ka&&!_a?(Fi=(_i=new Ka).port2,_i.port1.onmessage=Qa,Di=ja(Fi.postMessage,Fi)):Ia.addEventListener&&Pa(Ia.postMessage)&&!Ia.importScripts&&Mi&&"file:"!==Mi.protocol&&!Aa(Ya)?(Di=Ya,Ia.addEventListener("message",Qa,!1)):Di=$a in Ma("script")?function(e){Na.appendChild(Ma("script"))[$a]=function(){Na.removeChild(this),Ja(e)}}:function(e){setTimeout(Xa(e),0)});var Za={set:qa,clear:Va},ec=function(){this.head=null,this.tail=null};ec.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var tc,nc,rc,oc,ic,ac=ec,cc=/ipad|iphone|ipod/i.test(D)&&"undefined"!=typeof Pebble,sc=/web0s(?!.*chrome)/i.test(D),uc=n,fc=Xn,lc=Zr.f,hc=Za.set,dc=ac,pc=Oa,vc=cc,gc=sc,mc=qi,yc=uc.MutationObserver||uc.WebKitMutationObserver,bc=uc.document,wc=uc.process,kc=uc.Promise,Ec=lc(uc,"queueMicrotask"),Sc=Ec&&Ec.value;if(!Sc){var Tc=new dc,xc=function(){var e,t;for(mc&&(e=wc.domain)&&e.exit();t=Tc.get();)try{t()}catch(e){throw Tc.head&&tc(),e}e&&e.enter()};pc||mc||gc||!yc||!bc?!vc&&kc&&kc.resolve?((oc=kc.resolve(void 0)).constructor=kc,ic=fc(oc.then,oc),tc=function(){ic(xc)}):mc?tc=function(){wc.nextTick(xc)}:(hc=fc(hc,uc),tc=function(){hc(xc)}):(nc=!0,rc=bc.createTextNode(""),new yc(xc).observe(rc,{characterData:!0}),tc=function(){rc.data=nc=!nc}),Sc=function(e){Tc.head||tc(),Tc.add(e)}}var Oc=Sc,Ic=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Cc=n.Promise,jc="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Pc=!jc&&!qi&&"object"==typeof window&&"object"==typeof document,Rc=n,Ac=Cc,Nc=se,Lc=ni,Mc=At,Dc=ne,_c=Pc,Fc=jc,qc=H;Ac&&Ac.prototype;var Vc=Dc("species"),Bc=!1,Uc=Nc(Rc.PromiseRejectionEvent),Hc=Lc("Promise",(function(){var e=Mc(Ac),t=e!==String(Ac);if(!t&&66===qc)return!0;if(!qc||qc<51||!/native code/.test(e)){var n=new Ac((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Vc]=r,!(Bc=n.then((function(){}))instanceof r))return!0}return!t&&(_c||Fc)&&!Uc})),Kc={CONSTRUCTOR:Hc,REJECTION_EVENT:Uc,SUBCLASSING:Bc},Gc={},zc=Ue,Wc=TypeError,$c=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw Wc("Bad Promise constructor");t=e,n=r})),this.resolve=zc(t),this.reject=zc(n)};Gc.f=function(e){return new $c(e)};var Jc,Xc,Qc,Yc=fi,Zc=qi,es=n,ts=Ie,ns=On,rs=$i,os=Yi,is=aa,as=Ue,cs=se,ss=de,us=ua,fs=ma,ls=Za.set,hs=Oc,ds=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}},ps=Ic,vs=ac,gs=rn,ms=Cc,ys=Gc,bs="Promise",ws=Kc.CONSTRUCTOR,ks=Kc.REJECTION_EVENT,Es=Kc.SUBCLASSING,Ss=gs.getterFor(bs),Ts=gs.set,xs=ms&&ms.prototype,Os=ms,Is=xs,Cs=es.TypeError,js=es.document,Ps=es.process,Rs=ys.f,As=Rs,Ns=!!(js&&js.createEvent&&es.dispatchEvent),Ls="unhandledrejection",Ms=function(e){var t;return!(!ss(e)||!cs(t=e.then))&&t},Ds=function(e,t){var n,r,o,i=t.value,a=1==t.state,c=a?e.ok:e.fail,s=e.resolve,u=e.reject,f=e.domain;try{c?(a||(2===t.rejection&&Bs(t),t.rejection=1),!0===c?n=i:(f&&f.enter(),n=c(i),f&&(f.exit(),o=!0)),n===e.promise?u(Cs("Promise-chain cycle")):(r=Ms(n))?ts(r,n,s,u):s(n)):u(i)}catch(e){f&&!o&&f.exit(),u(e)}},_s=function(e,t){e.notified||(e.notified=!0,hs((function(){for(var n,r=e.reactions;n=r.get();)Ds(n,e);e.notified=!1,t&&!e.rejection&&qs(e)})))},Fs=function(e,t,n){var r,o;Ns?((r=js.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),es.dispatchEvent(r)):r={promise:t,reason:n},!ks&&(o=es["on"+e])?o(r):e===Ls&&ds("Unhandled promise rejection",n)},qs=function(e){ts(ls,es,(function(){var t,n=e.facade,r=e.value;if(Vs(e)&&(t=ps((function(){Zc?Ps.emit("unhandledRejection",r,n):Fs(Ls,n,r)})),e.rejection=Zc||Vs(e)?2:1,t.error))throw t.value}))},Vs=function(e){return 1!==e.rejection&&!e.parent},Bs=function(e){ts(ls,es,(function(){var t=e.facade;Zc?Ps.emit("rejectionHandled",t):Fs("rejectionhandled",t,e.value)}))},Us=function(e,t,n){return function(r){e(t,r,n)}},Hs=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,_s(e,!0))},Ks=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Cs("Promise can't be resolved itself");var r=Ms(t);r?hs((function(){var n={done:!1};try{ts(r,t,Us(Ks,n,e),Us(Hs,n,e))}catch(t){Hs(n,t,e)}})):(e.value=t,e.state=1,_s(e,!1))}catch(t){Hs({done:!1},t,e)}}};if(ws&&(Is=(Os=function(e){us(this,Is),as(e),ts(Jc,this);var t=Ss(this);try{e(Us(Ks,t),Us(Hs,t))}catch(e){Hs(t,e)}}).prototype,(Jc=function(e){Ts(this,{type:bs,done:!1,notified:!1,parent:!1,reactions:new vs,rejection:!1,state:0,value:void 0})}).prototype=ns(Is,"then",(function(e,t){var n=Ss(this),r=Rs(fs(this,Os));return n.parent=!0,r.ok=!cs(e)||e,r.fail=cs(t)&&t,r.domain=Zc?Ps.domain:void 0,0==n.state?n.reactions.add(r):hs((function(){Ds(r,n)})),r.promise})),Xc=function(){var e=new Jc,t=Ss(e);this.promise=e,this.resolve=Us(Ks,t),this.reject=Us(Hs,t)},ys.f=Rs=function(e){return e===Os||undefined===e?new Xc(e):As(e)},cs(ms)&&xs!==Object.prototype)){Qc=xs.then,Es||ns(xs,"then",(function(e,t){var n=this;return new Os((function(e,t){ts(Qc,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete xs.constructor}catch(e){}rs&&rs(xs,Is)}Yc({global:!0,constructor:!0,wrap:!0,forced:ws},{Promise:Os}),os(Os,bs,!1),is(bs);var Gs={},zs=Gs,Ws=ne("iterator"),$s=Array.prototype,Js=_n,Xs=Ge,Qs=k,Ys=Gs,Zs=ne("iterator"),eu=function(e){if(!Qs(e))return Xs(e,Zs)||Xs(e,"@@iterator")||Ys[Js(e)]},tu=Ie,nu=Ue,ru=Te,ou=Fe,iu=eu,au=TypeError,cu=Ie,su=Te,uu=Ge,fu=Xn,lu=Ie,hu=Te,du=Fe,pu=function(e){return void 0!==e&&(zs.Array===e||$s[Ws]===e)},vu=fr,gu=Re,mu=function(e,t){var n=arguments.length<2?iu(e):t;if(nu(n))return ru(tu(n,e));throw au(ou(e)+" is not iterable")},yu=eu,bu=function(e,t,n){var r,o;su(e);try{if(!(r=uu(e,"return"))){if("throw"===t)throw n;return n}r=cu(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return su(r),n},wu=TypeError,ku=function(e,t){this.stopped=e,this.result=t},Eu=ku.prototype,Su=function(e,t,n){var r,o,i,a,c,s,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=fu(t,f),g=function(e){return r&&bu(r,"normal",e),new ku(!0,e)},m=function(e){return l?(hu(e),p?v(e[0],e[1],g):v(e[0],e[1])):p?v(e,g):v(e)};if(h)r=e.iterator;else if(d)r=e;else{if(!(o=yu(e)))throw wu(du(e)+" is not iterable");if(pu(o)){for(i=0,a=vu(e);a>i;i++)if((c=m(e[i]))&&gu(Eu,c))return c;return new ku(!1)}r=mu(e,o)}for(s=h?e.next:r.next;!(u=lu(s,r)).done;){try{c=m(u.value)}catch(e){bu(r,"throw",e)}if("object"==typeof c&&c&&gu(Eu,c))return c}return new ku(!1)},Tu=ne("iterator"),xu=!1;try{var Ou=0,Iu={next:function(){return{done:!!Ou++}},return:function(){xu=!0}};Iu[Tu]=function(){return this},Array.from(Iu,(function(){throw 2}))}catch(e){}var Cu=function(e,t){if(!t&&!xu)return!1;var n=!1;try{var r={};r[Tu]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},ju=Cc,Pu=Kc.CONSTRUCTOR||!Cu((function(e){ju.all(e).then(void 0,(function(){}))})),Ru=Ie,Au=Ue,Nu=Gc,Lu=Ic,Mu=Su;fi({target:"Promise",stat:!0,forced:Pu},{all:function(e){var t=this,n=Nu.f(t),r=n.resolve,o=n.reject,i=Lu((function(){var n=Au(t.resolve),i=[],a=0,c=1;Mu(e,(function(e){var s=a++,u=!1;c++,Ru(n,t,e).then((function(e){u||(u=!0,i[s]=e,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),n.promise}});var Du=fi,_u=Kc.CONSTRUCTOR,Fu=Cc,qu=Pe,Vu=se,Bu=On,Uu=Fu&&Fu.prototype;if(Du({target:"Promise",proto:!0,forced:_u,real:!0},{catch:function(e){return this.then(void 0,e)}}),Vu(Fu)){var Hu=qu("Promise").prototype.catch;Uu.catch!==Hu&&Bu(Uu,"catch",Hu,{unsafe:!0})}var Ku=Ie,Gu=Ue,zu=Gc,Wu=Ic,$u=Su;fi({target:"Promise",stat:!0,forced:Pu},{race:function(e){var t=this,n=zu.f(t),r=n.reject,o=Wu((function(){var o=Gu(t.resolve);$u(e,(function(e){Ku(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Ju=Ie,Xu=Gc;fi({target:"Promise",stat:!0,forced:Kc.CONSTRUCTOR},{reject:function(e){var t=Xu.f(this);return Ju(t.reject,void 0,e),t.promise}});var Qu=Te,Yu=de,Zu=Gc,ef=fi,tf=Kc.CONSTRUCTOR,nf=function(e,t){if(Qu(e),Yu(t)&&t.constructor===e)return t;var n=Zu.f(e);return(0,n.resolve)(t),n.promise};Pe("Promise"),ef({target:"Promise",stat:!0,forced:tf},{resolve:function(e){return nf(this,e)}});var rf={},of=Ao,af=No,cf=Object.keys||function(e){return of(e,af)},sf=fe,uf=we,ff=ue,lf=Te,hf=ao,df=cf;rf.f=sf&&!uf?Object.defineProperties:function(e,t){lf(e);for(var n,r=hf(t),o=df(t),i=o.length,a=0;i>a;)ff.f(e,n=o[a++],r[n]);return e};var pf,vf=Te,gf=rf,mf=No,yf=Ht,bf=Sa,wf=me,kf="prototype",Ef="script",Sf=Ut("IE_PROTO"),Tf=function(){},xf=function(e){return"<"+Ef+">"+e+"</"+Ef+">"},Of=function(e){e.write(xf("")),e.close();var t=e.parentWindow.Object;return e=null,t},If=function(){try{pf=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;If="undefined"!=typeof document?document.domain&&pf?Of(pf):(t=wf("iframe"),n="java"+Ef+":",t.style.display="none",bf.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(xf("document.F=Object")),e.close(),e.F):Of(pf);for(var r=mf.length;r--;)delete If[kf][mf[r]];return If()};yf[Sf]=!0;var Cf=Object.create||function(e,t){var n;return null!==e?(Tf[kf]=vf(e),n=new Tf,Tf[kf]=null,n[Sf]=e):n=If(),void 0===t?n:gf.f(n,t)},jf=ne,Pf=Cf,Rf=ue.f,Af=jf("unscopables"),Nf=Array.prototype;null==Nf[Af]&&Rf(Nf,Af,{configurable:!0,value:Pf(null)});var Lf=function(e){Nf[Af][e]=!0},Mf=Oo.includes,Df=Lf;fi({target:"Array",proto:!0,forced:p((function(){return!Array(1).includes()}))},{includes:function(e){return Mf(this,e,arguments.length>1?arguments[1]:void 0)}}),Df("includes");var _f=de,Ff=Pn,qf=ne("match"),Vf=function(e){var t;return _f(e)&&(void 0!==(t=e[qf])?!!t:"RegExp"==Ff(e))},Bf=Vf,Uf=TypeError,Hf=_n,Kf=String,Gf=function(e){if("Symbol"===Hf(e))throw TypeError("Cannot convert a Symbol value to a string");return Kf(e)},zf=ne("match"),Wf=fi,$f=function(e){if(Bf(e))throw Uf("The method doesn't accept regular expressions");return e},Jf=T,Xf=Gf,Qf=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[zf]=!1,"/./"[e](t)}catch(e){}}return!1},Yf=w("".indexOf);Wf({target:"String",proto:!0,forced:!Qf("includes")},{includes:function(e){return!!~Yf(Xf(Jf(this)),Xf($f(e)),arguments.length>1?arguments[1]:void 0)}});var Zf=at,el=ue,tl=Dt,nl=function(e,t,n){var r=Zf(t);r in e?el.f(e,r,tl(0,n)):e[r]=n},rl=p,ol=H,il=ne("species"),al=function(e){return ol>=51||!rl((function(){var t=[];return(t.constructor={})[il]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},cl=fi,sl=p,ul=hr,fl=de,ll=I,hl=fr,dl=mi,pl=nl,vl=Nr,gl=al,ml=H,yl=ne("isConcatSpreadable"),bl=ml>=51||!sl((function(){var e=[];return e[yl]=!1,e.concat()[0]!==e})),wl=function(e){if(!fl(e))return!1;var t=e[yl];return void 0!==t?!!t:ul(e)};cl({target:"Array",proto:!0,arity:1,forced:!bl||!gl("concat")},{concat:function(e){var t,n,r,o,i,a=ll(this),c=vl(a,0),s=0;for(t=-1,r=arguments.length;t<r;t++)if(wl(i=-1===t?a:arguments[t]))for(o=hl(i),dl(s+o),n=0;n<o;n++,s++)n in i&&pl(c,s,i[n]);else dl(s+1),pl(c,s++,i);return c.length=s,c}});var kl=fe,El=xt.EXISTS,Sl=w,Tl=ta,xl=Function.prototype,Ol=Sl(xl.toString),Il=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Cl=Sl(Il.exec);kl&&!El&&Tl(xl,"name",{configurable:!0,get:function(){try{return Cl(Il,Ol(this))[1]}catch(e){return""}}});var jl=I,Pl=cf;fi({target:"Object",stat:!0,forced:p((function(){Pl(1)}))},{keys:function(e){return Pl(jl(e))}});var Rl=Te,Al=function(){var e=Rl(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Nl=Ie,Ll=P,Ml=Re,Dl=Al,_l=RegExp.prototype,Fl=function(e){var t=e.flags;return void 0!==t||"flags"in _l||Ll(e,"flags")||!Ml(_l,e)?t:Nl(Dl,e)},ql=xt.PROPER,Vl=On,Bl=Te,Ul=Gf,Hl=p,Kl=Fl,Gl="toString",zl=RegExp.prototype[Gl],Wl=Hl((function(){return"/a/b"!=zl.call({source:"a",flags:"b"})})),$l=ql&&zl.name!=Gl;(Wl||$l)&&Vl(RegExp.prototype,Gl,(function(){var e=Bl(this);return"/"+Ul(e.source)+"/"+Ul(Kl(e))}),{unsafe:!0});var Jl=p,Xl=n.RegExp,Ql=Jl((function(){var e=Xl("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Yl=Ql||Jl((function(){return!Xl("a","y").sticky})),Zl=Ql||Jl((function(){var e=Xl("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),eh={BROKEN_CARET:Zl,MISSED_STICKY:Yl,UNSUPPORTED_Y:Ql},th=p,nh=n.RegExp,rh=th((function(){var e=nh(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),oh=p,ih=n.RegExp,ah=oh((function(){var e=ih("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ch=Ie,sh=w,uh=Gf,fh=Al,lh=eh,hh=Cf,dh=rn.get,ph=rh,vh=ah,gh=r("native-string-replace",String.prototype.replace),mh=RegExp.prototype.exec,yh=mh,bh=sh("".charAt),wh=sh("".indexOf),kh=sh("".replace),Eh=sh("".slice),Sh=function(){var e=/a/,t=/b*/g;return ch(mh,e,"a"),ch(mh,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Th=lh.BROKEN_CARET,xh=void 0!==/()??/.exec("")[1];(Sh||xh||Th||ph||vh)&&(yh=function(e){var t,n,r,o,i,a,c,s=this,u=dh(s),f=uh(e),l=u.raw;if(l)return l.lastIndex=s.lastIndex,t=ch(yh,l,f),s.lastIndex=l.lastIndex,t;var h=u.groups,d=Th&&s.sticky,p=ch(fh,s),v=s.source,g=0,m=f;if(d&&(p=kh(p,"y",""),-1===wh(p,"g")&&(p+="g"),m=Eh(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==bh(f,s.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),n=new RegExp("^(?:"+v+")",p)),xh&&(n=new RegExp("^"+v+"$(?!\\s)",p)),Sh&&(r=s.lastIndex),o=ch(mh,d?n:s,m),d?o?(o.input=Eh(o.input,g),o[0]=Eh(o[0],g),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:Sh&&o&&(s.lastIndex=s.global?o.index+o[0].length:r),xh&&o&&o.length>1&&ch(gh,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=hh(null),i=0;i<h.length;i++)a[(c=h[i])[0]]=o[c[1]];return o});var Oh=yh;fi({target:"RegExp",proto:!0,forced:/./.exec!==Oh},{exec:Oh});var Ih=zn,Ch=On,jh=Oh,Ph=p,Rh=ne,Ah=qt,Nh=Rh("species"),Lh=RegExp.prototype,Mh=function(e,t,n,r){var o=Rh(e),i=!Ph((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!Ph((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Nh]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!i||!a||n){var c=Ih(/./[o]),s=t(o,""[e],(function(e,t,n,r,o){var a=Ih(e),s=t.exec;return s===jh||s===Lh.exec?i&&!o?{done:!0,value:c(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));Ch(String.prototype,e,s[0]),Ch(Lh,o,s[1])}r&&Ah(Lh[o],"sham",!0)},Dh=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},_h=Ie,Fh=Te,qh=se,Vh=Pn,Bh=Oh,Uh=TypeError,Hh=function(e,t){var n=e.exec;if(qh(n)){var r=_h(n,e,t);return null!==r&&Fh(r),r}if("RegExp"===Vh(e))return _h(Bh,e,t);throw Uh("RegExp#exec called on incompatible receiver")},Kh=Ie,Gh=Te,zh=k,Wh=T,$h=Dh,Jh=Gf,Xh=Ge,Qh=Hh;Mh("search",(function(e,t,n){return[function(t){var n=Wh(this),r=zh(t)?void 0:Xh(t,e);return r?Kh(r,t,n):new RegExp(t)[e](Jh(n))},function(e){var r=Gh(this),o=Jh(e),i=n(t,r,o);if(i.done)return i.value;var a=r.lastIndex;$h(a,0)||(r.lastIndex=0);var c=Qh(r,o);return $h(r.lastIndex,a)||(r.lastIndex=a),null===c?-1:c.index}]}));var Yh=w,Zh=ir,ed=Gf,td=T,nd=Yh("".charAt),rd=Yh("".charCodeAt),od=Yh("".slice),id=function(e){return function(t,n){var r,o,i=ed(td(t)),a=Zh(n),c=i.length;return a<0||a>=c?e?"":void 0:(r=rd(i,a))<55296||r>56319||a+1===c||(o=rd(i,a+1))<56320||o>57343?e?nd(i,a):r:e?od(i,a,a+2):o-56320+(r-55296<<10)+65536}},ad={codeAt:id(!1),charAt:id(!0)},cd=ad.charAt,sd=function(e,t,n){return t+(n?cd(e,t).length:1)},ud=w,fd=I,ld=Math.floor,hd=ud("".charAt),dd=ud("".replace),pd=ud("".slice),vd=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,gd=/\$([$&'`]|\d{1,2})/g,md=Ea,yd=Ie,bd=w,wd=Mh,kd=p,Ed=Te,Sd=se,Td=k,xd=ir,Od=sr,Id=Gf,Cd=T,jd=sd,Pd=Ge,Rd=function(e,t,n,r,o,i){var a=n+e.length,c=r.length,s=gd;return void 0!==o&&(o=fd(o),s=vd),dd(i,s,(function(i,s){var u;switch(hd(s,0)){case"$":return"$";case"&":return e;case"`":return pd(t,0,n);case"'":return pd(t,a);case"<":u=o[pd(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>c){var l=ld(f/10);return 0===l?i:l<=c?void 0===r[l-1]?hd(s,1):r[l-1]+hd(s,1):i}u=r[f-1]}return void 0===u?"":u}))},Ad=Hh,Nd=ne("replace"),Ld=Math.max,Md=Math.min,Dd=bd([].concat),_d=bd([].push),Fd=bd("".indexOf),qd=bd("".slice),Vd="$0"==="a".replace(/./,"$0"),Bd=!!/./[Nd]&&""===/./[Nd]("a","$0"),Ud=!kd((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));wd("replace",(function(e,t,n){var r=Bd?"$":"$0";return[function(e,n){var r=Cd(this),o=Td(e)?void 0:Pd(e,Nd);return o?yd(o,e,r,n):yd(t,Id(r),e,n)},function(e,o){var i=Ed(this),a=Id(e);if("string"==typeof o&&-1===Fd(o,r)&&-1===Fd(o,"$<")){var c=n(t,i,a,o);if(c.done)return c.value}var s=Sd(o);s||(o=Id(o));var u=i.global;if(u){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Ad(i,a);if(null===h)break;if(_d(l,h),!u)break;""===Id(h[0])&&(i.lastIndex=jd(a,Od(i.lastIndex),f))}for(var d,p="",v=0,g=0;g<l.length;g++){for(var m=Id((h=l[g])[0]),y=Ld(Md(xd(h.index),a.length),0),b=[],w=1;w<h.length;w++)_d(b,void 0===(d=h[w])?d:String(d));var k=h.groups;if(s){var E=Dd([m],b,y,a);void 0!==k&&_d(E,k);var S=Id(md(o,void 0,E))}else S=Rd(m,a,y,b,k,o);y>=v&&(p+=qd(a,v,y)+S,v=y+m.length)}return p+qd(a,v)}]}),!Ud||!Vd||Bd);var Hd=se,Kd=de,Gd=$i,zd=function(e,t,n){var r,o;return Gd&&Hd(r=t.constructor)&&r!==n&&Kd(o=r.prototype)&&o!==n.prototype&&Gd(e,o),e},Wd=ue.f,$d=function(e,t,n){n in e||Wd(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},Jd=fe,Xd=n,Qd=w,Yd=ni,Zd=zd,ep=qt,tp=mo.f,np=Re,rp=Vf,op=Gf,ip=Fl,ap=eh,cp=$d,sp=On,up=p,fp=P,lp=rn.enforce,hp=aa,dp=rh,pp=ah,vp=ne("match"),gp=Xd.RegExp,mp=gp.prototype,yp=Xd.SyntaxError,bp=Qd(mp.exec),wp=Qd("".charAt),kp=Qd("".replace),Ep=Qd("".indexOf),Sp=Qd("".slice),Tp=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,xp=/a/g,Op=/a/g,Ip=new gp(xp)!==xp,Cp=ap.MISSED_STICKY,jp=ap.UNSUPPORTED_Y,Pp=Jd&&(!Ip||Cp||dp||pp||up((function(){return Op[vp]=!1,gp(xp)!=xp||gp(Op)==Op||"/a/i"!=gp(xp,"i")})));if(Yd("RegExp",Pp)){for(var Rp=function(e,t){var n,r,o,i,a,c,s=np(mp,this),u=rp(e),f=void 0===t,l=[],h=e;if(!s&&u&&f&&e.constructor===Rp)return e;if((u||np(mp,e))&&(e=e.source,f&&(t=ip(h))),e=void 0===e?"":op(e),t=void 0===t?"":op(t),h=e,dp&&"dotAll"in xp&&(r=!!t&&Ep(t,"s")>-1)&&(t=kp(t,/s/g,"")),n=t,Cp&&"sticky"in xp&&(o=!!t&&Ep(t,"y")>-1)&&jp&&(t=kp(t,/y/g,"")),pp&&(i=function(e){for(var t,n=e.length,r=0,o="",i=[],a={},c=!1,s=!1,u=0,f="";r<=n;r++){if("\\"===(t=wp(e,r)))t+=wp(e,++r);else if("]"===t)c=!1;else if(!c)switch(!0){case"["===t:c=!0;break;case"("===t:bp(Tp,Sp(e,r+1))&&(r+=2,s=!0),o+=t,u++;continue;case">"===t&&s:if(""===f||fp(a,f))throw new yp("Invalid capture group name");a[f]=!0,i[i.length]=[f,u],s=!1,f="";continue}s?f+=t:o+=t}return[o,i]}(e),e=i[0],l=i[1]),a=Zd(gp(e,t),s?this:mp,Rp),(r||o||l.length)&&(c=lp(a),r&&(c.dotAll=!0,c.raw=Rp(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=wp(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+wp(e,++r);return o}(e),n)),o&&(c.sticky=!0),l.length&&(c.groups=l)),e!==h)try{ep(a,"source",""===h?"(?:)":h)}catch(e){}return a},Ap=tp(gp),Np=0;Ap.length>Np;)cp(Rp,gp,Ap[Np++]);mp.constructor=Rp,Rp.prototype=mp,sp(Xd,"RegExp",Rp,{constructor:!0})}hp("RegExp");var Lp=fe,Mp=rh,Dp=Pn,_p=ta,Fp=rn.get,qp=RegExp.prototype,Vp=TypeError;Lp&&Mp&&_p(qp,"dotAll",{configurable:!0,get:function(){if(this!==qp){if("RegExp"===Dp(this))return!!Fp(this).dotAll;throw Vp("Incompatible receiver, RegExp required")}}});var Bp=fe,Up=eh.MISSED_STICKY,Hp=Pn,Kp=ta,Gp=rn.get,zp=RegExp.prototype,Wp=TypeError;Bp&&Up&&Kp(zp,"sticky",{configurable:!0,get:function(){if(this!==zp){if("RegExp"===Hp(this))return!!Gp(this).sticky;throw Wp("Incompatible receiver, RegExp required")}}});var $p=Gf,Jp=de,Xp=qt,Qp=Error,Yp=w("".replace),Zp=String(Qp("zxcasd").stack),ev=/\n\s*at [^:]*:[^\n]*/,tv=ev.test(Zp),nv=Dt,rv=!p((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",nv(1,7)),7!==e.stack)})),ov=qt,iv=function(e,t){if(tv&&"string"==typeof e&&!Qp.prepareStackTrace)for(;t--;)e=Yp(e,ev,"");return e},av=rv,cv=Error.captureStackTrace,sv=Pe,uv=P,fv=qt,lv=Re,hv=$i,dv=Wo,pv=$d,vv=zd,gv=function(e,t){return void 0===e?arguments.length<2?"":t:$p(e)},mv=function(e,t){Jp(t)&&"cause"in t&&Xp(e,"cause",t.cause)},yv=function(e,t,n,r){av&&(cv?cv(e,t):ov(e,"stack",iv(n,r)))},bv=fe,wv=fi,kv=Ea,Ev=function(e,t,n,r){var o="stackTraceLimit",i=r?2:1,a=e.split("."),c=a[a.length-1],s=sv.apply(null,a);if(s){var u=s.prototype;if(uv(u,"cause")&&delete u.cause,!n)return s;var f=sv("Error"),l=t((function(e,t){var n=gv(r?t:e,void 0),o=r?new s(e):new s;return void 0!==n&&fv(o,"message",n),yv(o,l,o.stack,2),this&&lv(u,this)&&vv(o,this,l),arguments.length>i&&mv(o,arguments[i]),o}));l.prototype=u,"Error"!==c?hv?hv(l,f):dv(l,f,{name:!0}):bv&&o in s&&(pv(l,s,o),pv(l,s,"prepareStackTrace")),dv(l,s);try{u.name!==c&&fv(u,"name",c),u.constructor=l}catch(e){}return l}},Sv="WebAssembly",Tv=n[Sv],xv=7!==Error("e",{cause:7}).cause,Ov=function(e,t){var n={};n[e]=Ev(e,t,xv),wv({global:!0,constructor:!0,arity:1,forced:xv},n)},Iv=function(e,t){if(Tv&&Tv[e]){var n={};n[e]=Ev(Sv+"."+e,t,xv),wv({target:Sv,stat:!0,constructor:!0,arity:1,forced:xv},n)}};Ov("Error",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("EvalError",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("RangeError",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("ReferenceError",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("SyntaxError",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("TypeError",(function(e){return function(t){return kv(e,this,arguments)}})),Ov("URIError",(function(e){return function(t){return kv(e,this,arguments)}})),Iv("CompileError",(function(e){return function(t){return kv(e,this,arguments)}})),Iv("LinkError",(function(e){return function(t){return kv(e,this,arguments)}})),Iv("RuntimeError",(function(e){return function(t){return kv(e,this,arguments)}}));var Cv=hr,jv=se,Pv=Pn,Rv=Gf,Av=w([].push),Nv=fi,Lv=Pe,Mv=Ea,Dv=Ie,_v=w,Fv=p,qv=se,Vv=De,Bv=Ta,Uv=function(e){if(jv(e))return e;if(Cv(e)){for(var t=e.length,n=[],r=0;r<t;r++){var o=e[r];"string"==typeof o?Av(n,o):"number"!=typeof o&&"Number"!=Pv(o)&&"String"!=Pv(o)||Av(n,Rv(o))}var i=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(Cv(this))return t;for(var r=0;r<i;r++)if(n[r]===e)return t}}},Hv=z,Kv=String,Gv=Lv("JSON","stringify"),zv=_v(/./.exec),Wv=_v("".charAt),$v=_v("".charCodeAt),Jv=_v("".replace),Xv=_v(1..toString),Qv=/[\uD800-\uDFFF]/g,Yv=/^[\uD800-\uDBFF]$/,Zv=/^[\uDC00-\uDFFF]$/,eg=!Hv||Fv((function(){var e=Lv("Symbol")();return"[null]"!=Gv([e])||"{}"!=Gv({a:e})||"{}"!=Gv(Object(e))})),tg=Fv((function(){return'"\\udf06\\ud834"'!==Gv("\udf06\ud834")||'"\\udead"'!==Gv("\udead")})),ng=function(e,t){var n=Bv(arguments),r=Uv(t);if(qv(r)||void 0!==e&&!Vv(e))return n[1]=function(e,t){if(qv(r)&&(t=Dv(r,this,Kv(e),t)),!Vv(t))return t},Mv(Gv,null,n)},rg=function(e,t,n){var r=Wv(n,t-1),o=Wv(n,t+1);return zv(Yv,e)&&!zv(Zv,o)||zv(Zv,e)&&!zv(Yv,r)?"\\u"+Xv($v(e,0),16):e};Gv&&Nv({target:"JSON",stat:!0,arity:3,forced:eg||tg},{stringify:function(e,t,n){var r=Bv(arguments),o=Mv(eg?ng:Gv,null,r);return tg&&"string"==typeof o?Jv(o,Qv,rg):o}});var og=Fe,ig=TypeError,ag=fi,cg=I,sg=ko,ug=ir,fg=fr,lg=vi,hg=mi,dg=Nr,pg=nl,vg=function(e,t){if(!delete e[t])throw ig("Cannot delete property "+og(t)+" of "+og(e))},gg=al("splice"),mg=Math.max,yg=Math.min;ag({target:"Array",proto:!0,forced:!gg},{splice:function(e,t){var n,r,o,i,a,c,s=cg(this),u=fg(s),f=sg(e,u),l=arguments.length;for(0===l?n=r=0:1===l?(n=0,r=u-f):(n=l-2,r=yg(mg(ug(t),0),u-f)),hg(u+n-r),o=dg(s,r),i=0;i<r;i++)(a=f+i)in s&&pg(o,i,s[a]);if(o.length=r,n<r){for(i=f;i<u-r;i++)c=i+n,(a=i+r)in s?s[c]=s[a]:vg(s,c);for(i=u;i>u-r+n;i--)vg(s,i-1)}else if(n>r)for(i=u-r;i>f;i--)c=i+n-1,(a=i+r-1)in s?s[c]=s[a]:vg(s,c);for(i=0;i<n;i++)s[i+f]=arguments[i+2];return lg(s,u-r+n),o}});var bg=Br.filter;fi({target:"Array",proto:!0,forced:!al("filter")},{filter:function(e){return bg(this,e,arguments.length>1?arguments[1]:void 0)}});var wg=Ue,kg=I,Eg=tr,Sg=fr,Tg=TypeError,xg=function(e){return function(t,n,r,o){wg(n);var i=kg(t),a=Eg(i),c=Sg(i),s=e?c-1:0,u=e?-1:1;if(r<2)for(;;){if(s in a){o=a[s],s+=u;break}if(s+=u,e?s<0:c<=s)throw Tg("Reduce of empty array with no initial value")}for(;e?s>=0:c>s;s+=u)s in a&&(o=n(o,a[s],s,i));return o}},Og={left:xg(!1),right:xg(!0)}.left;fi({target:"Array",proto:!0,forced:!qi&&H>79&&H<83||!Hr("reduce")},{reduce:function(e){var t=arguments.length;return Og(this,e,t,t>1?arguments[1]:void 0)}});var Ig=Ie,Cg=Te,jg=k,Pg=sr,Rg=Gf,Ag=T,Ng=Ge,Lg=sd,Mg=Hh;Mh("match",(function(e,t,n){return[function(t){var n=Ag(this),r=jg(t)?void 0:Ng(t,e);return r?Ig(r,t,n):new RegExp(t)[e](Rg(n))},function(e){var r=Cg(this),o=Rg(e),i=n(t,r,o);if(i.done)return i.value;if(!r.global)return Mg(r,o);var a=r.unicode;r.lastIndex=0;for(var c,s=[],u=0;null!==(c=Mg(r,o));){var f=Rg(c[0]);s[u]=f,""===f&&(r.lastIndex=Lg(o,Pg(r.lastIndex),a)),u++}return 0===u?null:s}]}));var Dg=ko,_g=fr,Fg=nl,qg=Array,Vg=Math.max,Bg=function(e,t,n){for(var r=_g(e),o=Dg(t,r),i=Dg(void 0===n?r:n,r),a=qg(Vg(i-o,0)),c=0;o<i;o++,c++)Fg(a,c,e[o]);return a.length=c,a},Ug=Ea,Hg=Ie,Kg=w,Gg=Mh,zg=Te,Wg=k,$g=Vf,Jg=T,Xg=ma,Qg=sd,Yg=sr,Zg=Gf,em=Ge,tm=Bg,nm=Hh,rm=Oh,om=p,im=eh.UNSUPPORTED_Y,am=4294967295,cm=Math.min,sm=[].push,um=Kg(/./.exec),fm=Kg(sm),lm=Kg("".slice),hm=!om((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Gg("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=Zg(Jg(this)),o=void 0===n?am:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!$g(e))return Hg(t,r,e,o);for(var i,a,c,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,l=new RegExp(e.source,u+"g");(i=Hg(rm,l,r))&&!((a=l.lastIndex)>f&&(fm(s,lm(r,f,i.index)),i.length>1&&i.index<r.length&&Ug(sm,s,tm(i,1)),c=i[0].length,f=a,s.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!c&&um(l,"")||fm(s,""):fm(s,lm(r,f)),s.length>o?tm(s,0,o):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:Hg(t,this,e,n)}:t,[function(t,n){var o=Jg(this),i=Wg(t)?void 0:em(t,e);return i?Hg(i,t,o,n):Hg(r,Zg(o),t,n)},function(e,o){var i=zg(this),a=Zg(e),c=n(r,i,a,o,r!==t);if(c.done)return c.value;var s=Xg(i,RegExp),u=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(im?"g":"y"),l=new s(im?"^(?:"+i.source+")":i,f),h=void 0===o?am:o>>>0;if(0===h)return[];if(0===a.length)return null===nm(l,a)?[a]:[];for(var d=0,p=0,v=[];p<a.length;){l.lastIndex=im?0:p;var g,m=nm(l,im?lm(a,p):a);if(null===m||(g=cm(Yg(l.lastIndex+(im?p:0)),a.length))===d)p=Qg(a,p,u);else{if(fm(v,lm(a,d,p)),v.length===h)return v;for(var y=1;y<=m.length-1;y++)if(fm(v,m[y]),v.length===h)return v;p=d=g}}return fm(v,lm(a,d)),v}]}),!hm,im);var dm,pm,vm=fi,gm=Ie,mm=se,ym=Te,bm=Gf,wm=(dm=!1,(pm=/[ac]/).exec=function(){return dm=!0,/./.exec.apply(this,arguments)},!0===pm.test("abc")&&dm),km=/./.test;vm({target:"RegExp",proto:!0,forced:!wm},{test:function(e){var t=ym(this),n=bm(e),r=t.exec;if(!mm(r))return gm(km,t,n);var o=gm(r,t,n);return null!==o&&(ym(o),!0)}});var Em="X-Apple-Columbo-ID",Sm="Authorization",Tm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.appConfig.columboId,r=t.endpoint,o=void 0===r?"https://columbo-event.corp.apple.com/api/v2":r;xi(this,e),this.columboId=n,this.endpoint="".concat(o,"/cid"),this.failedRequests=0}return Ii(e,[{key:"checkThrottle",value:function(){return this.headerPairs=[[Em,this.columboId]],this.getJson("".concat(this.endpoint,"/service/throttleCheck")).then((function(e){var t=e.json;return t&&t.allowEvents}))}},{key:"getConfig",value:function(){var e=this;this.headerPairs=[[Em,this.columboId]];var t="".concat(this.endpoint,"/config/ColumboWebReporterConfig"),n=Sm;return this.getJson(t,n).then((function(t){var r=t.json,o=t.header;return e.cidHeaderPairs=[[n,o]],r}))}},{key:"postSession",value:function(e){var t=this,n=function(){return t.postJson("".concat(t.endpoint,"/service/web/sessions"),e)};return n().catch(this.tryRefreshToken(n))}},{key:"postView",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/views"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"postEvents",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/events"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"postBricksEvents",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/bricks"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"postErrors",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/jserrors"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"postTimings",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/timings"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"postCustomKeys",value:function(e,t){var n=this,r=function(){return n.postJson("".concat(n.endpoint,"/service/web/session/").concat(e.sessionId,"/customKeys"),t)};return r().catch(this.tryRefreshToken(r)).catch(this.tryPostSession(r,e))}},{key:"tryRefreshToken",value:function(e){var t=this;return function(n){return 403===n.status?t.getConfig().then(e):Promise.reject(n)}}},{key:"tryPostSession",value:function(e,t){var n=this;return function(r){return 412===r.status?n.postSession(t).then(e):Promise.reject(r)}}},{key:"getJson",value:function(e,t){return this.xhr({method:"GET",url:e,expectedHeader:t}).then((function(e){if(200===e.status){var t=e.responseText,n=e.header;return{json:JSON.parse(t||null),header:n}}return e}))}},{key:"postJson",value:function(e,t){this.headerPairs=this.cidHeaderPairs;var n=JSON.stringify(t);return this.xhr({method:"POST",url:e,payload:n,header:{name:"Content-Type",value:"application/json"}})}},{key:"xhr",value:function(e){var t=this,n=e.method,r=e.url,o=e.payload,i=e.header,a=e.expectedHeader;return new Promise((function(e,c){var s=new window.XMLHttpRequest;s.columboHooked=!0,s.open(n,r),s.timeout=1e4,i&&s.setRequestHeader(i.name,i.value),t.headerPairs&&t.headerPairs.forEach((function(e){s.setRequestHeader(e[0],e[1])})),s.onload=function(){var n=s.status,r=s.statusText,o=s.responseText,i=a&&s.getResponseHeader(a);n>=200&&n<400?(t.failedRequests=0,e({status:n,statusText:r,responseText:o,header:i})):(t.failedRequests++,c({status:n,statusText:r}))},s.onerror=s.onabort=s.ontimeout=function(){var e=s.status,n=s.statusText;t.failedRequests++,c({status:e,statusText:n})},s.send(o||null)}))}}]),e}(),xm=function(){function e(t){xi(this,e),this.reporter=t,this.deviceCookieName="".concat(this.reporter.id,"_did"),this.sessionCookieName="".concat(this.reporter.id,"_skey"),this.allowEventsCookieName="".concat(this.reporter.id,"_allow_events"),this.queueName="".concat(this.reporter.id,"_mq");try{document.cookie="_cr_test=1",this.cookieEnabled=-1!==document.cookie.indexOf("_cr_test"),document.cookie="_cr_test=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(e){this.cookieEnabled=!1}try{window.localStorage.setItem("_cr_test","1"),window.localStorage.removeItem("_cr_test"),this.localStorageAccessible=!0}catch(e){this.localStorageAccessible=!1}}return Ii(e,[{key:"getCookieValue",value:function(e){var t=this.cookieEnabled&&document.cookie.match(RegExp("(?:^|;\\s*)".concat(e,"=([^;\\s]+)")));return t&&t[1]}},{key:"setCookieValue",value:function(e,t,n){if(this.cookieEnabled){var r=this.reporter.config.cookieConfig,o=r.domain,i=r.path,a=new Date(Date.now()+1e3*n).toUTCString();document.cookie="".concat(e,"=").concat(t,";expires=").concat(a,";path=").concat(i,";domain=").concat(o)}}},{key:"getDeviceId",value:function(){return this.getCookieValue(this.deviceCookieName)}},{key:"setDeviceId",value:function(e){this.setCookieValue(this.deviceCookieName,e,this.reporter.config.cookieConfig.deviceTimeout)}},{key:"getSessionKey",value:function(){return this.getCookieValue(this.sessionCookieName)}},{key:"setSessionKey",value:function(e){this.setCookieValue(this.sessionCookieName,e,this.reporter.config.cookieConfig.sessionTimeout)}},{key:"getAllowEvents",value:function(){return this.getCookieValue(this.allowEventsCookieName)}},{key:"setAllowEvents",value:function(e){this.setCookieValue(this.allowEventsCookieName,e,this.reporter.config.cookieConfig.sessionTimeout)}},{key:"backupQueues",value:function(){if(!this.localStorageAccessible)return!1;try{return localStorage.setItem(this.queueName,JSON.stringify(this.reporter.queues)),!0}catch(e){return!1}}},{key:"restoreQueues",value:function(){if(!this.localStorageAccessible)return!1;try{return JSON.parse(localStorage.getItem(this.queueName))}catch(e){return null}}}]),e}();function Om(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}var Im=fe,Cm=w,jm=Ie,Pm=p,Rm=cf,Am=Do,Nm=eo,Lm=I,Mm=tr,Dm=Object.assign,_m=Object.defineProperty,Fm=Cm([].concat),qm=!Dm||Pm((function(){if(Im&&1!==Dm({b:1},Dm(_m({},"a",{enumerable:!0,get:function(){_m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Dm({},e)[n]||Rm(Dm({},t)).join("")!=r}))?function(e,t){for(var n=Lm(e),r=arguments.length,o=1,i=Am.f,a=Nm.f;r>o;)for(var c,s=Mm(arguments[o++]),u=i?Fm(Rm(s),i(s)):Rm(s),f=u.length,l=0;f>l;)c=u[l++],Im&&!jm(a,s,c)||(n[c]=s[c]);return n}:Dm,Vm=qm;fi({target:"Object",stat:!0,arity:2,forced:Object.assign!==Vm},{assign:Vm});var Bm="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Um=T,Hm=Gf,Km=Bm,Gm=w("".replace),zm=RegExp("^["+Km+"]+"),Wm=RegExp("(^|[^"+Km+"])["+Km+"]+$"),$m=function(e){return function(t){var n=Hm(Um(t));return 1&e&&(n=Gm(n,zm,"")),2&e&&(n=Gm(n,Wm,"$1")),n}},Jm={start:$m(1),end:$m(2),trim:$m(3)},Xm=xt.PROPER,Qm=p,Ym=Bm,Zm=Jm.trim;function ey(e){return e&&"object"===Ti(e)&&!Array.isArray(e)}function ty(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();return ey(e)&&ey(o)&&Object.keys(o).forEach((function(t){ey(o[t])?(e[t]||Object.assign(e,Ci({},t,{})),ty(e[t],o[t])):void 0!==o[t]&&Object.assign(e,Ci({},t,o[t]))})),ty.apply(void 0,[e].concat(n))}function ny(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e&&!e.matches)return!1;var n=t.allowedListSelector,r=t.deniedListSelector,o=t.filter;return!(n&&!e.matches(n))&&((!r||!e.matches(r))&&!(o&&!o.call(e,e)))}fi({target:"String",proto:!0,forced:function(e){return Qm((function(){return!!Ym[e]()||"âÂá "!=="âÂá "[e]()||Xm&&Ym[e].name!==e}))}("trim")},{trim:function(){return Zm(this)}});var ry=function(){function e(t){var n=this;xi(this,e),this.reporter=t,document.addEventListener("click",(function(e){return n.track(e)}),!0)}return Ii(e,[{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.criterion,n=e.customControlId;t&&(this.criterion=t),this.customControlId=n,this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(e){if(this.enabled){var t=e.target.closest("a,area");if(t){var n=this.customControlId?this.customControlId(t):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.dataset&&e.dataset.controlId)return e.dataset.controlId;if(e.id)return e.id;var t=e.innerText?e.innerText.replace(/\r?\n/g," ").trim().substr(0,100):"";return e.closest("[id]")?"#".concat(e.closest("[id]").id,"(").concat(t,")"):t?"(".concat(t,")"):e.tagName}(t);t.href&&ny(t,this.criterion)&&(!/^(.*script|mocha|mailto):/i.test(t.href)||this.criterion||this.customControlId&&this.customControlId(t)&&t.dataset&&t.dataset.controlId)?this.reporter.reportEvent({eventType:window.location.hostname!==t.hostname?"outboundLinkClick":"linkClick",controlId:n,controlType:"link",controlValue:t.href,action:"click"}):this.reporter.config.debug&&console.log("".concat(n," is not trackable"))}}}}]),e}(),oy=function(){function e(t){var n=this;xi(this,e),this.reporter=t,document.addEventListener("change",(function(e){return n.trackFormChange(e)}),!0),document.addEventListener("submit",(function(e){return n.trackFormSubmit(e)}),!0)}return Ii(e,[{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.forms,n=e.fields;t&&(this.formCriterion=t),n&&(this.fieldCriterion=n),this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"trackFormChange",value:function(t){if(this.enabled&&t.target.matches("input,select,textarea")){var n=t.target;if(ny(n,this.fieldCriterion)){var r=n.form;if(r&&ny(r,this.formCriterion)){var o="".concat(e.getElementId(r),"-").concat(e.getElementId(n));this.reporter.reportEvent({eventType:"formChange",controlId:o,controlType:"form-".concat(n.nodeName,"-").concat(n.type).replace(/(SELECT|TEXTAREA)-/,"").toLowerCase(),controlValue:"SELECT"===n.nodeName?n.value:o,action:"contentModify"})}}}}},{key:"trackFormSubmit",value:function(t){if(this.enabled&&t.target.matches("form")){var n=t.target;if(ny(n,this.formCriterion)){var r=e.getElementId(n);this.reporter.reportEvent({eventType:"formSubmit",controlId:r,controlType:"form",controlValue:r,action:"submit"})}}}}],[{key:"getElementId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.name||e.id||e.type||e.nodeName}}]),e}(),iy=function(){function e(t){xi(this,e),this.reporter=t,this.pushStateOriginal=window.history.pushState.bind(window.history),window.history.pushState=this.pushStateOverride.bind(this),this.track=this.track.bind(this),window.addEventListener("popstate",this.track)}return Ii(e,[{key:"pushStateOverride",value:function(){this.referrer=window.location.href,this.pushStateOriginal.apply(this,arguments),setTimeout(this.track,0)}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(){this.enabled&&this.referrer!==window.location.href&&(this.reporter.reportPageView({referrer:this.referrer}),this.referrer=window.location.href)}}]),e}(),ay=function(){function e(t){xi(this,e),this.reporter=t,this.queries=[],this.defaultOptions={changeTimeout:1e3,definitions:{breakpoints:[{name:"sm",media:"(min-width: 320px) and (max-width: 735px)"},{name:"md",media:"(min-width: 736px) and (max-width: 1068px)"},{name:"lg",media:"(min-width: 1069px) and (max-width: 1440px)"},{name:"xlg",media:"(min-width: 1441px)"}],orientations:[{name:"landscape",media:"(orientation: landscape)"},{name:"portrait",media:"(orientation: portrait)"}]}}}return Ii(e,[{key:"enable",value:function(e){var t=this;if(this.enabled=!0,window.matchMedia){this.queries.forEach((function(e){var t=e.mediaQueryList,n=e.listener;return t.removeListener(n)})),this.queries=[];var n,r,o,i=ty(this.defaultOptions,e),a=i.changeTimeout,c=i.definitions,s=c.breakpoints,u=c.orientations,f=(n=function(e,n){t.track(e,{eventType:"breakpoints",controlValue:n})},r=a,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(o),o=setTimeout((function(){return n.apply(void 0,t)}),r)});s&&s.forEach((function(e){var n=e.name,r=e.media,o=window.matchMedia(r),i=function(e){return f(e,n)};t.queries.push({mediaQueryList:o,listener:i}),o.addListener(i),t.track(window.matchMedia(r),{eventType:"breakpoints",controlValue:n})})),u&&u.forEach((function(e){var n=e.name,r=e.media,o=window.matchMedia(r),i=function(e){t.track(e,{eventType:"orientations",controlValue:n})};t.queries.push({mediaQueryList:o,listener:i}),o.addListener(i),t.track(window.matchMedia(r),{eventType:"orientations",controlValue:n})}))}}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(e,t){var n=t.eventType,r=t.controlValue;this.enabled&&e.matches&&this.reporter.reportEvent({eventType:n,controlId:this.reporter.page.pageId,controlType:"page",controlValue:r,action:"".concat(n.substring(0,n.length-1),"Change")})}}]),e}(),cy=function(){function e(t){var n=this;xi(this,e),this.reporter=t,this.userActiveDelay=10,this.lastActivityTime=Date.now();var r=!0;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return r={passive:!0,capture:!0}}}))}catch(e){}this.track=this.track.bind(this),["DOMMouseScroll","scroll","resize","blur","focus"].forEach((function(e){window.addEventListener(e,n.track,r)})),["touchstart","click","mouseup","mousedown","mousemove","mousewheel","keypress","keydown","keyup"].forEach((function(e){document.addEventListener(e,n.track,r)}))}return Ii(e,[{key:"enable",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userActiveDelay;e&&(this.userActiveDelay=Math.max(e,10)),this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(){if(this.enabled){var e=Date.now();e-this.lastActivityTime>1e3*this.userActiveDelay&&(this.lastActivityTime=e,this.reporter.reportEvent({eventType:"userActive",controlId:this.reporter.page.pageId,controlType:"page",activeTimeSecs:this.userActiveDelay,action:"userActive",timestamp:new Date(this.lastActivityTime)}))}}}]),e}(),sy=function(){function e(t){var n=this;xi(this,e),this.reporter=t,this.maxErrorsPerPage=10,this.pageErrorsCounter=0,window.addEventListener("error",(function(e){return n.track(e)}),!0)}return Ii(e,[{key:"resetPageErrorsCounter",value:function(){this.pageErrorsCounter=0}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.maxErrorsPerPage,n=e.filter;t&&(this.maxErrorsPerPage=t),this.filter=n,this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(e){var t,n,r,o,i,a;this.enabled&&(this.filter&&!this.filter(e)||(this.pageErrorsCounter++>=this.maxErrorsPerPage?console.warn("Error ignored as max errors per page limit is reached i.e. ".concat(this.maxErrorsPerPage)):(e instanceof ErrorEvent?(t=e.message,n=e.filename,r=e.lineno,o=e.colno,a=(i=e.error)&&i.name||"applicationError"):(n=e.target.src,a="ResourceError",t="Failed to load ".concat(n)),/^Script error.$/i.test(t)&&(n=window.location.href,a="CORSScriptError",t="No details. See https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror#Notes"),this.reporter.report({filename:n||"unknownFileSource",name:a,message:t,lineno:r,colno:o,stack:i&&i.stack}))))}}]),e}(),uy=function(){function e(t){var n=this;xi(this,e),this.reporter=t,window.performance.timing.loadEventEnd?this.track():window.addEventListener("load",(function(){return setTimeout((function(){return n.track()}),0)}))}return Ii(e,[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"track",value:function(){var e=window.performance.timing,t=e.connectEnd,n=e.connectStart,r=e.domComplete,o=e.domContentLoadedEventEnd,i=e.domContentLoadedEventStart,a=e.domInteractive,c=e.domLoading,s=e.domainLookupEnd,u=e.domainLookupStart,f=e.fetchStart,l=e.loadEventEnd,h=e.loadEventStart,d=e.navigationStart,p=e.redirectEnd,v=e.redirectStart,g=e.requestStart,m=e.responseEnd,y=e.responseStart,b=e.secureConnectionStart,w=e.unloadEventEnd,k=e.unloadEventStart;this.reporter.report({eventType:"timing",metadata:{connectEnd:t,connectStart:n,domComplete:r,domContentLoadedEventEnd:o,domContentLoadedEventStart:i,domInteractive:a,domLoading:c,domainLookupEnd:s,domainLookupStart:u,fetchStart:f,loadEventEnd:l,loadEventStart:h,navigationStart:d,redirectEnd:p,redirectStart:v,requestStart:g,responseEnd:m,responseStart:y,secureConnectionStart:b,unloadEventEnd:w,unloadEventStart:k}})}}]),e}(),fy=function(){function e(t){xi(this,e);var n=window.XMLHttpRequest.prototype.open;this.hookedOpen=function(e,r){this.columboHooked||(this.columboHooked=r||!0,this.addEventListener("load",(function(){this.status>=400&&t.report({filename:this.columboHooked,name:"XHRResponseError",message:"".concat(this.status," ").concat(this.statusText)})})),this.addEventListener("error",(function(){t.report({filename:this.columboHooked,name:"XHRNetworkError",message:"".concat(this.status," ").concat(this.statusText)})})));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];n.apply(this,[e,r].concat(i))},this.nativeOpen=n;var r=window.fetch;this.hookedFetch=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0];return new Promise((function(e,o){r.apply(void 0,n).then((function(n){n.status>=400&&t.report({filename:i,name:"FetchResponseError",message:"".concat(n.status," ").concat(n.statusText)}),e(n)})).catch((function(e){t.report({filename:i,name:"FetchNetworkError",message:e.message||JSON.stringify(e)}),o(e)}))}))},this.nativeFetch=r}return Ii(e,[{key:"enable",value:function(){window.XMLHttpRequest.prototype.open=this.hookedOpen,window.fetch&&(window.fetch=this.hookedFetch)}},{key:"disable",value:function(){window.XMLHttpRequest.prototype.open=this.nativeOpen,window.fetch&&(window.fetch=this.nativeFetch)}}]),e}(),ly=n,hy=w(1..valueOf),dy=fi,py=fe,vy=n,gy=ly,my=w,yy=ni,by=P,wy=zd,ky=Re,Ey=De,Sy=rt,Ty=p,xy=mo.f,Oy=Zr.f,Iy=ue.f,Cy=hy,jy=Jm.trim,Py="Number",Ry=vy[Py];gy[Py];var Ay=Ry.prototype,Ny=vy.TypeError,Ly=my("".slice),My=my("".charCodeAt),Dy=function(e){var t,n,r,o,i,a,c,s,u=Sy(e,"number");if(Ey(u))throw Ny("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=jy(u),43===(t=My(u,0))||45===t){if(88===(n=My(u,2))||120===n)return NaN}else if(48===t){switch(My(u,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=Ly(u,2)).length,c=0;c<a;c++)if((s=My(i,c))<48||s>o)return NaN;return parseInt(i,r)}return+u},_y=yy(Py,!Ry(" 0o1")||!Ry("0b1")||Ry("+0x1")),Fy=function(e){var t,n=arguments.length<1?0:Ry(function(e){var t=Sy(e,"number");return"bigint"==typeof t?t:Dy(t)}(e));return ky(Ay,t=this)&&Ty((function(){Cy(t)}))?wy(Object(n),this,Fy):n};Fy.prototype=Ay,_y&&(Ay.constructor=Fy),dy({global:!0,constructor:!0,wrap:!0,forced:_y},{Number:Fy});_y&&function(e,t){for(var n,r=py?xy(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;r.length>o;o++)by(t,n=r[o])&&!by(e,n)&&Iy(e,n,Oy(t,n))}(gy[Py],Ry);var qy=ir,Vy=Gf,By=T,Uy=RangeError,Hy=fi,Ky=w,Gy=ir,zy=hy,Wy=function(e){var t=Vy(By(this)),n="",r=qy(e);if(r<0||r==1/0)throw Uy("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},$y=p,Jy=RangeError,Xy=String,Qy=Math.floor,Yy=Ky(Wy),Zy=Ky("".slice),eb=Ky(1..toFixed),tb=function(e,t,n){return 0===t?n:t%2==1?tb(e,t-1,n*e):tb(e*e,t/2,n)},nb=function(e,t,n){for(var r=-1,o=n;++r<6;)o+=t*e[r],e[r]=o%1e7,o=Qy(o/1e7)},rb=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=Qy(r/t),r=r%t*1e7},ob=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=Xy(e[t]);n=""===n?r:n+Yy("0",7-r.length)+r}return n};Hy({target:"Number",proto:!0,forced:$y((function(){return"0.000"!==eb(8e-5,3)||"1"!==eb(.9,0)||"1.25"!==eb(1.255,2)||"1000000000000000128"!==eb(0xde0b6b3a7640080,0)}))||!$y((function(){eb({})}))},{toFixed:function(e){var t,n,r,o,i=zy(this),a=Gy(e),c=[0,0,0,0,0,0],s="",u="0";if(a<0||a>20)throw Jy("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return Xy(i);if(i<0&&(s="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*tb(2,69,1))-69)<0?i*tb(2,-t,1):i/tb(2,t,1),n*=4503599627370496,(t=52-t)>0){for(nb(c,0,n),r=a;r>=7;)nb(c,1e7,0),r-=7;for(nb(c,tb(10,r,1),0),r=t-1;r>=23;)rb(c,1<<23),r-=23;rb(c,1<<r),nb(c,1,1),rb(c,2),u=ob(c)}else nb(c,0,n),nb(c,1<<-t,0),u=ob(c)+Yy("0",a);return u=a>0?s+((o=u.length)<=a?"0."+Yy("0",a-o)+u:Zy(u,0,o-a)+"."+Zy(u,o-a)):s+u}});var ib,ab,cb,sb=!p((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ub=P,fb=se,lb=I,hb=sb,db=Ut("IE_PROTO"),pb=Object,vb=pb.prototype,gb=hb?pb.getPrototypeOf:function(e){var t=lb(e);if(ub(t,db))return t[db];var n=t.constructor;return fb(n)&&t instanceof n?n.prototype:t instanceof pb?vb:null},mb=p,yb=se,bb=de,wb=gb,kb=On,Eb=ne("iterator"),Sb=!1;[].keys&&("next"in(cb=[].keys())?(ab=wb(wb(cb)))!==Object.prototype&&(ib=ab):Sb=!0);var Tb=!bb(ib)||mb((function(){var e={};return ib[Eb].call(e)!==e}));Tb&&(ib={}),yb(ib[Eb])||kb(ib,Eb,(function(){return this}));var xb={IteratorPrototype:ib,BUGGY_SAFARI_ITERATORS:Sb},Ob=xb.IteratorPrototype,Ib=Cf,Cb=Dt,jb=Yi,Pb=Gs,Rb=function(){return this},Ab=fi,Nb=Ie,Lb=se,Mb=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Ib(Ob,{next:Cb(+!r,n)}),jb(e,o,!1),Pb[o]=Rb,e},Db=gb,_b=$i,Fb=Yi,qb=qt,Vb=On,Bb=Gs,Ub=xt.PROPER,Hb=xt.CONFIGURABLE,Kb=xb.IteratorPrototype,Gb=xb.BUGGY_SAFARI_ITERATORS,zb=ne("iterator"),Wb="keys",$b="values",Jb="entries",Xb=function(){return this},Qb=function(e,t,n,r,o,i,a){Mb(n,t,r);var c,s,u,f=function(e){if(e===o&&v)return v;if(!Gb&&e in d)return d[e];switch(e){case Wb:case $b:case Jb:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",h=!1,d=e.prototype,p=d[zb]||d["@@iterator"]||o&&d[o],v=!Gb&&p||f(o),g="Array"==t&&d.entries||p;if(g&&(c=Db(g.call(new e)))!==Object.prototype&&c.next&&(Db(c)!==Kb&&(_b?_b(c,Kb):Lb(c[zb])||Vb(c,zb,Xb)),Fb(c,l,!0)),Ub&&o==$b&&p&&p.name!==$b&&(Hb?qb(d,"name",$b):(h=!0,v=function(){return Nb(p,this)})),o)if(s={values:f($b),keys:i?v:f(Wb),entries:f(Jb)},a)for(u in s)(Gb||h||!(u in d))&&Vb(d,u,s[u]);else Ab({target:t,proto:!0,forced:Gb||h},s);return d[zb]!==v&&Vb(d,zb,v,{name:o}),Bb[t]=v,s},Yb=function(e,t){return{value:e,done:t}},Zb=ao,ew=Lf,tw=Gs,nw=rn,rw=ue.f,ow=Qb,iw=Yb,aw=fe,cw="Array Iterator",sw=nw.set,uw=nw.getterFor(cw),fw=ow(Array,"Array",(function(e,t){sw(this,{type:cw,target:Zb(e),index:0,kind:t})}),(function(){var e=uw(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,iw(void 0,!0)):iw("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),lw=tw.Arguments=tw.Array;if(ew("keys"),ew("values"),ew("entries"),aw&&"values"!==lw.name)try{rw(lw,"name",{value:"values"})}catch(e){}var hw={},dw={get exports(){return hw},set exports(e){hw=e}},pw={},vw=Pn,gw=ao,mw=mo.f,yw=Bg,bw="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];pw.f=function(e){return bw&&"Window"==vw(e)?function(e){try{return mw(e)}catch(e){return yw(bw)}}(e):mw(gw(e))};var ww=p((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),kw=p,Ew=de,Sw=Pn,Tw=ww,xw=Object.isExtensible,Ow=kw((function(){xw(1)}))||Tw?function(e){return!!Ew(e)&&((!Tw||"ArrayBuffer"!=Sw(e))&&(!xw||xw(e)))}:xw,Iw=!p((function(){return Object.isExtensible(Object.preventExtensions({}))})),Cw=fi,jw=w,Pw=Ht,Rw=de,Aw=P,Nw=ue.f,Lw=mo,Mw=pw,Dw=Ow,_w=Iw,Fw=!1,qw=M("meta"),Vw=0,Bw=function(e){Nw(e,qw,{value:{objectID:"O"+Vw++,weakData:{}}})},Uw=dw.exports={enable:function(){Uw.enable=function(){},Fw=!0;var e=Lw.f,t=jw([].splice),n={};n[qw]=1,e(n).length&&(Lw.f=function(n){for(var r=e(n),o=0,i=r.length;o<i;o++)if(r[o]===qw){t(r,o,1);break}return r},Cw({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Mw.f}))},fastKey:function(e,t){if(!Rw(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Aw(e,qw)){if(!Dw(e))return"F";if(!t)return"E";Bw(e)}return e[qw].objectID},getWeakData:function(e,t){if(!Aw(e,qw)){if(!Dw(e))return!0;if(!t)return!1;Bw(e)}return e[qw].weakData},onFreeze:function(e){return _w&&Fw&&Dw(e)&&!Aw(e,qw)&&Bw(e),e}};Pw[qw]=!0;var Hw=fi,Kw=n,Gw=w,zw=ni,Ww=On,$w=hw,Jw=Su,Xw=ua,Qw=se,Yw=k,Zw=de,ek=p,tk=Cu,nk=Yi,rk=zd,ok=On,ik=Cf,ak=ta,ck=function(e,t,n){for(var r in t)ok(e,r,t[r],n);return e},sk=Xn,uk=ua,fk=k,lk=Su,hk=Qb,dk=Yb,pk=aa,vk=fe,gk=hw.fastKey,mk=rn.set,yk=rn.getterFor,bk={getConstructor:function(e,t,n,r){var o=e((function(e,o){uk(e,i),mk(e,{type:t,index:ik(null),first:void 0,last:void 0,size:0}),vk||(e.size=0),fk(o)||lk(o,e[r],{that:e,AS_ENTRIES:n})})),i=o.prototype,a=yk(t),c=function(e,t,n){var r,o,i=a(e),c=s(e,t);return c?c.value=n:(i.last=c={index:o=gk(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=c),r&&(r.next=c),vk?i.size++:e.size++,"F"!==o&&(i.index[o]=c)),e},s=function(e,t){var n,r=a(e),o=gk(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return ck(i,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,vk?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=s(t,e);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),vk?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=sk(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),ck(i,n?{get:function(e){var t=s(this,e);return t&&t.value},set:function(e,t){return c(this,0===e?0:e,t)}}:{add:function(e){return c(this,e=0===e?0:e,e)}}),vk&&ak(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=yk(t),i=yk(r);hk(e,t,(function(e,t){mk(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?dk("keys"==t?n.key:"values"==t?n.value:[n.key,n.value],!1):(e.target=void 0,dk(void 0,!0))}),n?"entries":"values",!n,!0),pk(t)}},wk=function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=r?"set":"add",a=Kw[e],c=a&&a.prototype,s=a,u={},f=function(e){var t=Gw(c[e]);Ww(c,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!Zw(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return o&&!Zw(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!Zw(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(zw(e,!Qw(a)||!(o||c.forEach&&!ek((function(){(new a).entries().next()})))))s=n.getConstructor(t,e,r,i),$w.enable();else if(zw(e,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,d=ek((function(){l.has(1)})),p=tk((function(e){new a(e)})),v=!o&&ek((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));p||((s=t((function(e,t){Xw(e,c);var n=rk(new a,e,s);return Yw(t)||Jw(t,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=c,c.constructor=s),(d||v)&&(f("delete"),f("has"),r&&f("get")),(v||h)&&f(i),o&&c.clear&&delete c.clear}return u[e]=s,Hw({global:!0,constructor:!0,forced:s!=a},u),nk(s,e),o||n.setStrong(s,e,r),s};wk("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bk);var kk=ad.charAt,Ek=Gf,Sk=rn,Tk=Qb,xk=Yb,Ok="String Iterator",Ik=Sk.set,Ck=Sk.getterFor(Ok);Tk(String,"String",(function(e){Ik(this,{type:Ok,string:Ek(e),index:0})}),(function(){var e,t=Ck(this),n=t.string,r=t.index;return r>=n.length?xk(void 0,!0):(e=kk(n,r),t.index+=e.length,xk(e,!1))}));var jk=n,Pk=Vn,Rk=Hn,Ak=fw,Nk=qt,Lk=ne,Mk=Lk("iterator"),Dk=Lk("toStringTag"),_k=Ak.values,Fk=function(e,t){if(e){if(e[Mk]!==_k)try{Nk(e,Mk,_k)}catch(t){e[Mk]=_k}if(e[Dk]||Nk(e,Dk,t),Pk[t])for(var n in Ak)if(e[n]!==Ak[n])try{Nk(e,n,Ak[n])}catch(t){e[n]=Ak[n]}}};for(var qk in Pk)Fk(jk[qk]&&jk[qk].prototype,qk);Fk(Rk,"DOMTokenList");var Vk=Br.map;fi({target:"Array",proto:!0,forced:!al("map")},{map:function(e){return Vk(this,e,arguments.length>1?arguments[1]:void 0)}});var Bk=function(){function e(t){var n=this;xi(this,e),this.reporter=t,this.pushStateOriginal=window.history.pushState.bind(window.history),window.history.pushState=this.pushStateOverride.bind(this),this.track=this.track.bind(this),window.addEventListener("load",this.track),setInterval((function(){n.referrer!==window.location.href&&(n.referrer=window.location.href,n.track())}),500)}return Ii(e,[{key:"pushStateOverride",value:function(){this.referrer=window.location.href,this.pushStateOriginal.apply(this,arguments),setTimeout(this.track,0)}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enable=!1}},{key:"track",value:function(){var e=this;setTimeout((function(){var t;e.allTagNames=Ri(document.getElementsByTagName("*")),e.bricksElements=e.allTagNames.filter((function(e){return e.nodeName.toLowerCase().includes("bricks")}));var n={eventType:"bricks",controlId:"bricks:uuid",controlType:"bricks",controlValue:t={usesBricks:!!e.bricksElements.length,ratio:Number((e.bricksElements.length/e.allTagNames.length).toFixed(4)),url:window.location.href,bricksElementsOnPage:Ri(new Set(e.bricksElements.map((function(e){return e.nodeName}))))},timestamp:new Date};t.usesBricks&&e.reporter.reportEvent(n).catch((function(e){return console.error(e)}))}),1e4)}}]),e}(),Uk=["userRole","customkey1","customkey2","customkey3","customkey4","customkey5","customkey6","customkey7","customkey8","customkey9","customkey10"],Hk="ThrottleCheck.allowEvents is false",Kk=function(){function e(){xi(this,e),this.version="2.1.0",this.config={appConfig:{},ignoreBots:!0,cookieConfig:{deviceTimeout:63072e3,sessionTimeout:1800,path:"/"},pageView:{discardHash:!0},heartBeatDelay:10,eventsBatchingLimit:10,eventsBatchingInterval:15,trackers:["ActivityTracker","LinkTracker","PerformanceTracker","ErrorTracker","UrlChangeTracker","BricksTracker"]},this.availableTrackers={LinkTracker:ry,FormTracker:oy,UrlChangeTracker:iy,MediaQueryTracker:ay,ActivityTracker:cy,ErrorTracker:sy,PerformanceTracker:uy,NetworkTracker:fy,BricksTracker:Bk},this.customKeys={},this.device={},this.browser={},this.session={},this.page={},this.trackers=Object.create(null),this.queues=Object.create(null)}return Ii(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.appConfig,r=void 0===n?{}:n,o=r.columboId,i=r.version,a=r.context;if(!o)return Promise.reject("columboId is required");if(!i)return Promise.reject("{version} is required");this.id="_cr_".concat(o),"string"==typeof a||(r.context=""),ty(this.config,t),this.api=this.api||new Tm(this.config),this.store=new xm(this);var c;return(c=e.store.getAllowEvents(),null==c?e.api.checkThrottle():Promise.resolve("true"===c)).then((function(t){return e.allowEvents=t,e.throttleChecked=!0,e.allowEvents?e.api.getConfig().then((function(t){if(e.config.debug&&console.log("%cColumbo Happy Analytics!","font-size:2em;color:#f90;"),e.config.debug&&console.log("serverConfig",t),delete t.appConfig,t.cookieConfig||delete t.cookieConfig,ty(e.config,t),e.config.ignoreBots&&function(e){return/bot|crawler|spider|fetcher|slurp/i.test(e||navigator.userAgent)}())return Promise.reject("a bot detected");var n=navigator.doNotTrack||navigator.msDoNotTrack||window.doNotTrack;if(e.config.respectDoNotTrack&&("yes"===n||"1"===n))return Promise.reject("respect doNotTrack");if([].concat(e.config.excludeHosts).includes(window.location.hostname))return Promise.reject("hostname is excluded");e.config.cookieConfig.domain=e.config.cookieConfig.domain||window.location.hostname;var r=function(e){return{orUnknown:function(){return e||"Unknown"}}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,t={type:void 0,model:void 0},n={name:void 0,version:void 0},r={name:void 0,version:void 0},o={name:void 0,version:void 0},i=Pi(e.match(/\(([^\)]+)(?:.*\(KHTML, like Gecko[^\)]*\)\s*(.+))?/)||[],3),a=i[1],c=i[2],s=Pi(e.match(/\s?(Windows[^;\.\d]+|Android|[^;\d]+OS(?: X)?|Linux)\s([\._0-9]*)/)||[],3);n.name=s[1],n.version=s[2];var u=Pi(e.match(/(Trident|WebKit|Presto)\/([\.0-9]+)/)||[],3);o.name=u[1],o.version=u[2];var f,l=Pi(e.match(/Mobile|Tablet/)||["Android"===n.name?"Tablet":"Desktop"],1);if(t.type=l[0],n.name={"Windows NT":"Windows","Windows Phone OS":"Windows Phone","CPU iPhone OS":"iOS","CPU like Mac OS":"iOS","CPU OS":"iOS","Intel Mac OS X":"macOS",CrOS:"Chrome OS"}[n.name]||n.name,n.version?n.version=n.version.replace(/_/g,"."):n.version=void 0,"Windows"===n.name&&(n.version={5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10",ARM:"RT"}[n.version]||n.version),"iOS"===n.name)t.model=a.split(/;\s?/)[0],t.type="iPad"===t.model?"Tablet":"Mobile";else if("Android"===n.name){var h=Pi(a.match(/\s?([^;]+)\sBuild\//)||[],2);t.model=h[1],t.type=/Mobile/.test(e)?"Mobile":"Tablet"}else"Windows Phone"===n.name?(t.model=a.split(/;\s?/).pop(),t.type="Mobile"):"macOS"===n.name&&(t.model="Mac",t.type="Desktop");if(f=e.match(/rv:(.+)\) (Gecko)\/[^\s]+\s(.+)/)){var d=Pi(f,3);o.version=d[1],o.name=d[2];var p=Pi(f[3].split(" ").pop().split("/"),2);r.name=p[0],r.version=p[1]}else if(f=e.match(/(?:MSIE\s|rv\:|IEMobile\/)([\.\d]+)/))r.name="IE",r.version=f[1];else if(f=e.match(/\((.+);\s(Opera Mini)\/([\.\d]+)/)){t.type="Mobile";var v=Pi(f,4);t.model=v[1],r.name=v[2],r.version=v[3],"Android"===t.model&&(n.name=t.model)}else c&&(r.name="Safari",c.replace(/\sSafari\/[\.\d]+/,"").split(" ").forEach((function(e){var n=Pi(e.split("/"),2),o=n[0],i=n[1];"Version"===o?r.version=r.version||i:"Mobile"===o?t.type="Mobile":"Safari"!==r.name&&"Chrome"!==r.name||(r.name=o,r.version=i)})),r.name={CriOS:"Chrome",FxiOS:"Firefox",OPR:"Opera"}[r.name]||r.name);return"Edge"===r.name&&(o.name="EdgeHTML",o.version=r.version),{device:t,os:n,browser:r,engine:o}}(),i=e.store.getDeviceId();e.newDevice=!i,e.device.id=i||Om(),!i&&e.store.setDeviceId(e.device.id),e.device.type=r(o.device.type).orUnknown(),e.device.osName=r(o.os.name).orUnknown(),e.device.osVersion=r(o.os.version).orUnknown(),e.device.model=r(o.device.model).orUnknown(),e.device.screen={width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth},e.browser.name=r(o.browser.name).orUnknown(),e.browser.version=r(o.browser.version).orUnknown(),e.browser.engine={name:r(o.engine.name).orUnknown(),version:r(o.engine.version).orUnknown(),language:navigator.language||navigator.userLanguage},e.reportPageView(),e.reportCustomKeys();var a=function(){e.session.expiration>new Date&&e.pushEvents(e.sessionKey,{eventId:Om(),eventType:"heartBeat",controlId:e.page.pageId,controlType:"page",activeTimeSecs:e.config.heartBeatDelay,action:"heartBeat",pageId:e.page.pageId,timestamp:new Date})};e.executeQueues=e.executeQueues.bind(e);requestAnimationFrame((function t(n){t.lastBeat=t.lastBeat||n,t.lastBatch=t.lastBatch||n,n-t.lastBeat>1e3*e.config.heartBeatDelay&&(t.lastBeat=n,setTimeout(a,0));var r=1e3*e.config.eventsBatchingInterval*e.api.failedRequests*e.api.failedRequests;n-t.lastBatch>1e3*e.config.eventsBatchingInterval+r&&(t.lastBatch=n,setTimeout(e.executeQueues,0)),requestAnimationFrame(t)})),e.enable([].concat(Ri(e.config.trackers),["BricksTracker"])),e.initialized=!0;var c=e.store.restoreQueues();c&&Object.keys(c).forEach((function(t){c[t].length&&e.pushEvents(t,c[t])}))})):Promise.reject(Hk)}))}},{key:"enable",value:function(e){var t=this;e=e||Object.keys(this.trackers),[].concat(e).forEach((function(e){var n=e.name||e;t.trackers[n]=t.trackers[n]||t.availableTrackers[n]&&new t.availableTrackers[n](t),t.trackers[n]?t.trackers[n].enable(e.options):console.warn("".concat(n," is not an available tracker"))}))}},{key:"disable",value:function(e){var t=this;e=e||Object.keys(this.trackers),[].concat(e).forEach((function(e){var n=e.name||e;t.trackers[n]?t.trackers[n].disable():console.warn("".concat(n," is not an available tracker"))}))}},{key:"refreshSession",value:function(e){var t=this;if(!this.allowEvents)return Promise.reject(Hk);if(!e&&!this.session.expiration){var n=Pi((this.store.getSessionKey()||"").split(","),2);this.session.id=n[0],this.session.time=n[1]}var r=new Date;if((e||!this.session.id||this.session.expiration&&this.session.expiration<r)&&(this.session.id=Om(),this.session.time=r.getTime().toString(),e=!0),this.sessionKey="".concat(this.session.id,",").concat(this.session.time),this.session.expiration=new Date(r.getTime()+1e3*this.config.cookieConfig.sessionTimeout),this.store.setSessionKey(this.sessionKey),this.store.setAllowEvents(this.allowEvents),!e)return Promise.resolve();return(t.throttleChecked?(t.throttleChecked=!1,Promise.resolve(t.allowEvents)):t.api.checkThrottle()).then((function(e){if(t.allowEvents=e,t.store.setAllowEvents(t.allowEvents),!t.allowEvents)return Promise.reject(Hk);var n=t.buildSessionPayload(t.session.id,t.session.time);return t.api.postSession(n).then((function(){t.config.debug&&console.log("session posted",n)}))}))}},{key:"buildSessionPayload",value:function(e,t){return{reporterVersion:this.version,appVersion:this.config.appConfig.version,appContext:this.config.appConfig.context,newVisitor:this.newDevice,device:this.device,browser:this.browser,sessionStart:new Date(+t),sessionId:e,cookieEnabled:this.store.cookieEnabled,personId:""}}},{key:"reportCustomKeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userRole,r=t.customkey1,o=t.customkey2,i=t.customkey3,a=t.customkey4,c=t.customkey5,s=t.customkey6,u=t.customkey7,f=t.customkey8,l=t.customkey9,h=t.customkey10,d=ji(t,Uk);this.config.debug&&Object.keys(d).length&&console.warn("Invalid keys",Object.keys(d));var p={appearance:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",userRole:n,customkey1:r,customkey2:o,customkey3:i,customkey4:a,customkey5:c,customkey6:s,customkey7:u,customkey8:f,customkey9:l,customkey10:h};return this.refreshSession().then((function(){var t=e.buildSessionPayload(e.session.id,e.session.time);return e.api.postCustomKeys(t,p).then((function(){e.config.debug&&console.log("customKeys posted",p)})).catch((function(t){e.config.debug&&console.error(t)}))}))}},{key:"reportPageView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.pageId,r=t.title,o=t.referrer;if(this.trackers.ErrorTracker&&this.trackers.ErrorTracker.resetPageErrorsCounter(),!n){var i=this.config.pageView||{},a=i.indexFileName,c=i.trackQueryChange,s=i.discardHash,u=window.location,f=u.pathname,l=u.search,h=u.hash;n=f,a&&(n=n.replace(new RegExp("".concat(a,"$")),"")),c&&(n+=l),s||(n+=h)}return this.page.pageId=n,this.refreshSession().then((function(){e.page.title=r||document.title||"Unknown",e.page.url=window.location.href,e.page.referrer=o||document.referrer,e.config.pageView&&"function"==typeof e.config.pageView.customReferrer&&(e.page.referrer=e.config.pageView.customReferrer(e.page.referrer));var t=document.documentElement,n=Math.max(t.clientWidth,t.offsetWidth,t.scrollWidth),i=Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight);e.page.document="".concat(n,"x").concat(i),e.page.viewport="".concat(t.clientWidth,"x").concat(t.clientHeight),e.page.timestamp=new Date;var a=e.buildSessionPayload(e.session.id,e.session.time);return e.api.postView(a,e.page).then((function(){e.config.debug&&console.log("view posted",e.page)}))})).catch((function(e){console.error(e)}))}},{key:"reportEvent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.eventId,r=t.eventType,o=t.controlId,i=t.controlType,a=t.controlValue,c=t.activeTimeSecs,s=t.action,u=t.pageId,f=t.timestamp;if(!o)throw new TypeError("`controlId` is required");var l={eventId:n||Om(),eventType:r||"custom",controlId:o,controlType:i||"custom",controlValue:a,action:s||"custom",pageId:u||this.page.pageId,timestamp:f||new Date};return c&&(l.activeTimeSecs=c),a&&(l.controlValue=ey(a)?JSON.stringify(a):String(a)),"bricks"===r&&delete(l=Si(Si(Si({},l),a),{},{controlId:"bricks:".concat(Om())})).controlValue,this.refreshSession().then((function(){e.pushEvents(e.sessionKey,l),e.config.debug&&console.log("".concat(l.eventType," event queued"),l)}))}},{key:"report",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.eventId=Om(),t.pageId=this.page.pageId,t.timestamp=new Date,this.refreshSession().then((function(){e.pushEvents(e.sessionKey,t),e.config.debug&&console.log("".concat(t.eventType||"error"," event queued"),t)}))}},{key:"executeQueues",value:function(){var e=this;navigator.onLine&&Object.keys(this.queues).forEach((function(t){var n=e.queues[t].splice(0);if(e.store.backupQueues(),n&&n.length){var r=n.filter((function(e){return!!e.filename})),o=n.filter((function(e){return"timing"===e.eventType})),i=n.filter((function(e){var t=e.filename,n=e.eventType;return!t&&"timing"!==n&&"bricks"!==n})),a=n.filter((function(e){var t=e.filename,n=e.eventType;return!t&&"bricks"===n})),c=Pi(t.split(","),2),s=c[0],u=c[1],f=e.buildSessionPayload(s,u);e.post("Errors",r,f,t),e.post("Timings",o,f,t),e.post("Events",i,f,t),e.post("BricksEvents",a,f,t)}}))}},{key:"post",value:function(e,t,n,r){var o=this;t&&t.length&&this.api["post".concat(e)](n,Ci({},e.toLowerCase(),t)).then((function(){o.config.debug&&console.log("".concat(e," posted"),t)})).catch((function(e){o.api.failedRequests<10&&400!==e.status&&405!==e.status&&o.pushEvents(r,t),console.error(e)}))}},{key:"pushEvents",value:function(e,t){var n=this;this.queues[e]=this.queues[e]||[],this.queues[e]=this.queues[e].concat(t);var r=this.store.backupQueues(),o=Object.keys(this.queues).reduce((function(e,t){return e+n.queues[t].length}),0);(!r||o>=this.config.eventsBatchingLimit)&&this.api.failedRequests<=0&&this.executeQueues()}}]),e}(),Gk=new Kk;function zk(){window.Columbo.config&&Gk.init(window.Columbo.config).then((function(){window.Columbo.q&&window.Columbo.q.forEach((function(e){return e.call(Gk,Gk)})),window.Columbo=function(e,t){"function"==typeof e&&(t=e),"function"==typeof t&&t.call(Gk,Gk)},window.Columbo.reporter=Gk,Gk.config.debug&&console.log("window.Columbo.reporter",Gk)})).catch((function(e){console.error("ColumboReporter init failed: ",e)}))}window.Columbo?zk():window.Columbo=function(e,t){"function"==typeof e?t=e:window.Columbo.config=e,t&&(window.Columbo.q=window.Columbo.q||[]).push(t),!window.Columbo.reporter&&zk()}}();
